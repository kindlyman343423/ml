// ml@v0.3.6, MIT licensed. https://github.com/mljs/ml
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.ML=t()}}(function(){var define,module,exports;return function t(r,n,o){function e(s,a){if(!n[s]){if(!r[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var u=n[s]={exports:{}};r[s][0].call(u.exports,function(t){var n=r[s][1][t];return e(n?n:t)},u,u.exports,t,r,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)e(o[s]);return e}({1:[function(t,r,n){var o=n.Math={};o.Matrix=n.Matrix=t("ml-matrix"),o.Distance=t("ml-distance");var e=n.Stat={};e.array=t("ml-stat/array"),e.matrix=t("ml-stat/matrix");var i=n.SL={};i.SVM=t("ml-svm");var s=n.Clust={};s.kmeans=t("ml-kmeans"),s.hclust=t("ml-hclust");var a=n.NN=n.nn={};a.SOM=t("ml-som");n.ArrayUtils=n.AU=t("ml-array-utils")},{"ml-array-utils":4,"ml-distance":57,"ml-hclust":60,"ml-kmeans":61,"ml-matrix":70,"ml-som":72,"ml-stat/array":75,"ml-stat/matrix":76,"ml-svm":77}],2:[function(t,r){"use strict";function n(t,r){if(t.length%r!==0)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=t.length/r,o=new Array(n),e=0,i=0;i<t.length;i+=r){for(var s=new Array(r),a=0;r>a;++a)s[a]=t[i+a];o[e]=s,e++}return o}function o(t,r){if(t.length%r!==0)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=new Array(r),o=t.length/r,e=0;e<n.length;e++)n[e]=new Array(o);for(e=0;e<t.length;e+=r)for(var i=0;r>i;++i){var s=Math.floor(e/r);n[i][s]=t[e+i]}return n}function e(t){for(var r=new Array(t.length*t[0].length),n=0,o=0;o<t[0].length;++o)for(var e=0;e<t.length;++e)r[n]=t[e][o],++n;return r}function i(t){for(var r=new Array(t[0].length),n=0;n<r.length;++n)r[n]=new Array(t.length);for(n=0;n<t.length;++n)for(var o=0;o<t[0].length;++o)r[o][n]=t[n][o];return r}function s(t){for(var r=new Array(t.length*t[0].length),n=0,o=0;o<t.length;++o)for(var e=0;e<t[0].length;++e)r[n]=t[o][e],++n;return r}function a(t,r){var n,o;t.length<=r.length?(o=t,n=r):(o=r,n=t);for(var e=n.length-o.length+1,i=new Array(e),s=0;e>s;++s){for(var a=0,h=0;h<o.length;++h)a+=o[h]*n[s+h];i[s]=a}return i}r.exports={coordArrayToPoints:n,coordArrayToCoordMatrix:o,coordMatrixToCoordArray:e,coordMatrixToPoints:i,pointsToCoordArray:s,pointsToCoordMatrix:i,applyDotProduct:a}},{}],3:[function(t,r,n){"use strict";function o(t,r,n){function o(){return"smooth"===d?e(b,A,D,j):k}function i(){D=s(b,k,A,S),j=-D*b+k}function s(t,r,n,o){return(o-r)/(n-t)}var a=t.length;if(t.length!==r.length)throw new RangeError("the x and y vector doesn't have the same size.");void 0===n&&(n={});var h=void 0===n.from?t[0]:n.from,f=void 0===n.to?t[t.length-1]:n.to,u=h>f;if(u){var c=h;h=f,f=c}var l=void 0===n.numberOfPoints?100:n.numberOfPoints;if(1>l)throw new RangeError("the number of point must be higher than 1");var d="slot"===n.variant?"slot":"smooth",p=(f-h)/(l-1),v=p/2,m=h-v,g=new Array(l),w=t[1]-t[0],y=t[t.length-1]-t[t.length-2],M=m,x=m+p,b=-Number.MAX_VALUE,k=0,A=t[0]-w,S=0,q=0,D=0,j=0,C=0,R=0,z=0,O=0,E=0;t:for(;;){for(;A-x>=0;){var V="smooth"===d?e(0,x-b,D,k):k;R=q+V;var I="smooth"===d?p:z-1;if(g[E]=(R-C)/I,E++,E===l)break t;M=x,x+=p,C=R,"slot"===d&&(z=0)}M>=b&&A>=M&&(V="smooth"===d?e(0,M-b,D,k):k,C=q+V,"slot"===d&&z++),q+=o(),0!==z&&z++,b=A,k=S,a>O?(A=t[O],S=r[O],O++):O===a&&(A+=y,S=0),i()}return u?g.reverse():g}function e(t,r,n,o){return.5*n*r*r+o*r-(.5*n*t*t+o*t)}n.getEquallySpacedData=o,n.integral=e},{}],4:[function(t,r,n){r.exports=n=t("./ArrayUtils"),n.getEquallySpacedData=t("./getEquallySpaced").getEquallySpacedData},{"./ArrayUtils":2,"./getEquallySpaced":3}],5:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])*(t[n]+r[n])/(t[n]*r[n]);return 2*e}},{}],6:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0,s=0;n>s;s++)i=Math.abs(t[s]-r[s]),e+=i,i>o&&(o=i);return(o+e)/2}},{}],7:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.sqrt(t[e]*r[e]);return-Math.log(o)}},{}],8:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.abs(t[e]-r[e])/(t[e]+r[e]);return o}},{}],9:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)e=Math.abs(t[i]-r[i]),e>o&&(o=e);return o}},{}],10:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=Math.sqrt((t[n]-r[n])*(t[n]-r[n])/((t[n]+r[n])*(t[n]+r[n])));return 2*e}},{}],11:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0,s=0;n>s;s++)o+=t[s]*r[s],e+=t[s]*t[s],i+=r[s]*r[s];return o/(Math.sqrt(e)*Math.sqrt(i))}},{}],12:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.min(t[i],r[i]),e+=t[i]+r[i];return 1-2*o/e}},{}],13:[function(t,r){var n=t("./czekanowski");r.exports=function(t,r){return 1-n(t,r)}},{"./czekanowski":12}],14:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0,s=0;n>s;s++)o+=t[s]*t[s],e+=r[s]*r[s],i+=(t[s]-r[s])*(t[s]-r[s]);return i/(o+e)}},{}],15:[function(t,r){var n=t("./dice");r.exports=function(t,r){return 1-n(t,r)}},{"./dice":14}],16:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])/((t[n]+r[n])*(t[n]+r[n]));return 2*e}},{}],17:[function(t,r){var n=t("./squared-euclidean");r.exports=function(t,r){return Math.sqrt(n(t,r))}},{"./squared-euclidean":47}],18:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.sqrt(t[e]*r[e]);return o}},{}],19:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.abs(t[e]-r[e]);return o/n}},{}],20:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*r[e]/(t[e]+r[e]);return 2*o}},{}],21:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.sqrt(t[e]*r[e]);return 2*Math.sqrt(1-o)}},{}],22:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*r[e];return o}},{}],23:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.min(t[e],r[e]);return 1-o}},{}],24:[function(t,r){var n=t("./intersection");r.exports=function(t,r){return 1-n(t,r)}},{"./intersection":23}],25:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0,s=0,a=0;n>a;a++)o+=t[a]*r[a],e+=t[a]*t[a],i+=r[a]*r[a],s+=(t[a]-r[a])*(t[a]-r[a]);return s/(e+i-o)}},{}],26:[function(t,r){var n=t("./jaccard");r.exports=function(t,r){return 1-n(t,r)}},{"./jaccard":25}],27:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=(t[e]-r[e])*Math.log(t[e]/r[e]);return o}},{}],28:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=(t[e]*Math.log(t[e])+r[e]*Math.log(r[e]))/2-(t[e]+r[e])/2*Math.log((t[e]+r[e])/2);return o}},{}],29:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=t[i]*Math.log(2*t[i]/(t[i]+r[i])),e+=r[i]*Math.log(2*r[i]/(t[i]+r[i]));return(o+e)/2}},{}],30:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*Math.log(2*t[e]/(t[e]+r[e]));return o}},{}],31:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.abs(t[i]-r[i]),e+=Math.min(t[i],r[i]);return o/e}},{}],32:[function(t,r){var n=t("./kulczynski");r.exports=function(t,r){return 1/n(t,r)}},{"./kulczynski":31}],33:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*Math.log(t[e]/r[e]);return o}},{}],34:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0,s=0;n>s;s++)o+=t[s]*r[s],e+=t[s]*t[s],i+=r[s]*r[s];return o/(e+i-o)}},{}],35:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.pow(t[e]*t[e]-r[e]*r[e],2)/(2*Math.pow(t[e]*r[e],1.5));return o}},{}],36:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.log(Math.abs(t[e]-r[e])+1);return o}},{}],37:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=Math.abs(t[n]-r[n]);return e}},{}],38:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=Math.sqrt(t[e]*r[e]);return Math.sqrt(2-2*o)}},{}],39:[function(t,r){r.exports=function(t,r,n){for(var o=0,e=t.length,i=0;e>o;o++)i+=Math.pow(Math.abs(t[o]-r[o]),n);return Math.pow(i,1/n)}},{}],40:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.min(t[i],r[i]),e+=t[i]+r[i];return 1-o/e}},{}],41:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])/t[n];return e}},{}],42:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])/r[n];return e}},{}],43:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])/(t[n]+r[n]);return 2*e}},{}],44:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.min(t[i],r[i]),e+=Math.max(t[i],r[i]);return o/e}},{}],45:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.abs(t[i]-r[i]),e+=Math.max(t[i],r[i]);return o/e}},{}],46:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0,i=0;n>i;i++)o+=Math.abs(t[i]-r[i]),e+=t[i]+r[i];return o/e}},{}],47:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n]);return e}},{}],48:[function(t,r){r.exports=function(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n])/(t[n]+r[n]);return e}},{}],49:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=(Math.sqrt(t[e])-Math.sqrt(r[e]))*(Math.sqrt(t[e])-Math.sqrt(r[e]));return o}},{}],50:[function(t,r){var n=t("./squaredChord");r.exports=function(t,r){return 1-n(t,r)}},{"./squaredChord":49}],51:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=(t[e]+r[e])/2*Math.log((t[e]+r[e])/(2*Math.sqrt(t[e]*r[e])));return o}},{}],52:[function(t,r){var n=t("./tanimotoS");r.exports=function(t,r,o){if(o=o||!1)return 1-n(t,r,o);for(var e=t.length,i=0,s=0,a=0,h=0;e>h;h++)i+=t[h],s+=r[h],a+=Math.min(t[h],r[h]);return(i+s-2*a)/(i+s-a)}},{"./tanimotoS":53}],53:[function(t,r){r.exports=function(t,r,n){if(n=n||!1){for(var o=0,e=0,i=0;i<t.length;i++)o+=t[i]&&r[i],e+=t[i]||r[i];return 0===e?1:o/e}for(var s=t.length,a=0,h=0,f=0,u=0;s>u;u++)a+=t[u],h+=r[u],f+=Math.min(t[u],r[u]);return 1-(a+h-2*f)/(a+h-f)}},{}],54:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*Math.log(2*t[e]/(t[e]+r[e]))+r[e]*Math.log(2*r[e]/(t[e]+r[e]));return o}},{}],55:[function(t,r){"use strict";function n(t,r,o,e,i,s){if(i=i||.16,s=s||.01,i>e-o)return void 0;for(var a=0,h=0;t[h]<e;h++)t[h]>o&&(a+=r[h]);if(s>a)return void 0;for(var f=0,u=0;t[u]<e;u++)t[h]>o&&(f+=t[u]*r[u]);return f/=a,1e-5>f-o||1e-5>e-f?void 0:i/4>f-o?n(t,r,f,e,i,s):i/4>e-f?n(t,r,o,f,i,s):{sum:a,center:f,left:n(t,r,o,f,i,s),right:n(t,r,f,e,i,s)}}function o(t,r,n,e,i){if(void 0===t||void 0===r)return 0;var s=n*Math.min(t.sum,r.sum)/Math.max(t.sum,r.sum)+(1-n)*Math.exp(-i*Math.abs(t.center-r.center));return e*s+(1-e)*(o(t.left,r.left,n,e,i)+o(t.right,r.right,n,e,i))}function e(t,r,e,s,a){a=a||{};for(var h in i)a.hasOwnProperty(h)||(a[h]=i[h]);var f,u;return f=t.sum?t:n(t.x,t.y,e,s,a.minWindow,a.threshold),u=r.sum?r:n(r.x,r.y,e,s,a.minWindow,a.threshold),o(f,u,a.alpha,a.beta,a.gamma)}var i={minWindow:.16,threshold:.01,alpha:.1,beta:.33,gamma:.001};r.exports={calc:e,createTree:n}},{}],56:[function(t,r){r.exports=function(t,r){for(var n=t.length,o=0,e=0;n>e;e++)o+=1-Math.min(t[e],r[e])/Math.max(t[e],r[e]);return o}},{}],57:[function(t,r,n){n.euclidean=t("./dist/euclidean"),n.squaredEuclidean=t("./dist/squared-euclidean"),n.manhattan=t("./dist/manhattan"),n.minkowski=t("./dist/minkowski"),n.chebyshev=t("./dist/chebyshev"),n.sorensen=t("./dist/sorensen"),n.gower=t("./dist/gower"),n.soergel=t("./dist/soergel"),n.kulczynski=t("./dist/kulczynski"),n.kulczynskiS=t("./dist/kulczynskiS"),n.canberra=t("./dist/canberra"),n.lorentzian=t("./dist/lorentzian"),n.intersection=t("./dist/intersection"),n.intersectionS=t("./dist/intersectionS"),n.waveHedges=t("./dist/waveHedges"),n.czekanowski=t("./dist/czekanowski"),n.czekanowskiS=t("./dist/czekanowskiS"),n.motyka=t("./dist/motyka"),n.kulczynskiS=t("./dist/kulczynskiS"),n.ruzicka=t("./dist/ruzicka"),n.tanimoto=t("./dist/tanimoto"),n.tanimotoS=t("./dist/tanimotoS"),n.innerProduct=t("./dist/innerProduct"),n.harmonicMean=t("./dist/harmonicMean"),n.cosine=t("./dist/cosine"),n.kumarHassebrook=t("./dist/kumarHassebrook"),n.jaccard=t("./dist/jaccard"),n.jaccardS=t("./dist/jaccardS"),n.dice=t("./dist/dice"),n.diceS=t("./dist/diceS"),n.fidelity=t("./dist/fidelity"),n.bhattacharyya=t("./dist/bhattacharyya"),n.hellinger=t("./dist/hellinger"),n.matusita=t("./dist/matusita"),n.squaredChord=t("./dist/squaredChord"),n.squaredChordS=t("./dist/squaredChordS"),n.pearson=t("./dist/pearson"),n.neyman=t("./dist/neyman"),n.squared=t("./dist/squared"),n.probabilisticSymmetric=t("./dist/probabilisticSymmetric"),n.divergence=t("./dist/divergence"),n.clark=t("./dist/clark"),n.additiveSymmetric=t("./dist/additiveSymmetric"),n.kullbackLeibler=t("./dist/kullbackLeibler"),n.jeffreys=t("./dist/jeffreys"),n.kdivergence=t("./dist/kdivergence"),n.topsoe=t("./dist/topsoe"),n.jensenShannon=t("./dist/jensenShannon"),n.jensenDifference=t("./dist/jensenDifference"),n.taneja=t("./dist/taneja"),n.kumarJohnson=t("./dist/kumarJohnson"),n.avg=t("./dist/avg"),n.tree=t("./dist/tree")},{"./dist/additiveSymmetric":5,"./dist/avg":6,"./dist/bhattacharyya":7,"./dist/canberra":8,"./dist/chebyshev":9,"./dist/clark":10,"./dist/cosine":11,"./dist/czekanowski":12,"./dist/czekanowskiS":13,"./dist/dice":14,"./dist/diceS":15,"./dist/divergence":16,"./dist/euclidean":17,"./dist/fidelity":18,"./dist/gower":19,"./dist/harmonicMean":20,"./dist/hellinger":21,"./dist/innerProduct":22,"./dist/intersection":23,"./dist/intersectionS":24,"./dist/jaccard":25,"./dist/jaccardS":26,"./dist/jeffreys":27,"./dist/jensenDifference":28,"./dist/jensenShannon":29,"./dist/kdivergence":30,"./dist/kulczynski":31,"./dist/kulczynskiS":32,"./dist/kullbackLeibler":33,"./dist/kumarHassebrook":34,"./dist/kumarJohnson":35,"./dist/lorentzian":36,"./dist/manhattan":37,"./dist/matusita":38,"./dist/minkowski":39,"./dist/motyka":40,"./dist/neyman":41,"./dist/pearson":42,"./dist/probabilisticSymmetric":43,"./dist/ruzicka":44,"./dist/soergel":45,"./dist/sorensen":46,"./dist/squared":48,"./dist/squared-euclidean":47,"./dist/squaredChord":49,"./dist/squaredChordS":50,"./dist/taneja":51,"./dist/tanimoto":52,"./dist/tanimotoS":53,"./dist/topsoe":54,"./dist/tree":55,"./dist/waveHedges":56}],58:[function(t,r){"use strict";function n(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n]);return Math.sqrt(e)}function o(t){for(var r=t.concat(),n=0;n<r.length;++n)for(var o=n+1;o<r.length;++o)r[n]===r[o]&&r.splice(o--,1);return r}function e(t,r,n){for(var o=1e101,e=0;e<t.length;e++)for(var i=e;i<r.length;i++){var s=n(t[e],r[i]);o=Math.min(s,o)}return o}function i(t,r,n){for(var o=-1,e=0;e<t.length;e++)for(var i=e;i<r.length;i++){var s=n(t[e],r[i]);o=Math.max(s,o)}return o}function s(t,r,n){for(var o=0,e=0;e<t.length;e++)for(var i=0;i<r.length;i++)o+=n(t[e],r[i]);return o/(t.length*r.length)}function a(t,r,n){for(var o=0,e=0,i=0,s=0,a=0;a<t.length;a++)o+=t[a][0],e+=t[a][1];for(var h=0;h<r.length;h++)i+=r[h][0],s+=r[h][1];return o/=t.length,e/=t.length,i/=r.length,s/=r.length,n([o,e],[i,s])}function h(t,r,n){for(var o=0,e=0,i=0,s=0,a=0;a<t.length;a++)o+=t[a][0],e+=t[a][1];for(var h=0;h<r.length;h++)i+=r[h][0],s+=r[h][1];return o/=t.length,e/=t.length,i/=r.length,s/=r.length,n([o,e],[i,s])*t.length*r.length/(t.length+r.length)}function f(t,r){r=r||{},this.options={};for(var n in u)this.options[n]=r.hasOwnProperty(n)?r[n]:u[n];this.len=t.length;for(var f=new Array(this.len),c=0;c<this.len;c++)f[c]=[t[c]];if(t=f.concat(),"string"==typeof this.options.kind)switch(this.options.kind){case"single":this.options.kind=e;break;case"complete":this.options.kind=i;break;case"average":this.options.kind=s;break;case"centroid":this.options.kind=a;break;case"ward":this.options.kind=h;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof this.options.kind)throw new TypeError("Undefined kind of similarity");for(var l=new Array(t.length),d=0;d<t.length;d++)l[d]={index:d,dis:void 0,data:t[d].concat(),children:[]};for(var p=1e6,v={},m=0;l.length>1;){v={},p=1e6;for(var g=0;g<l.length;g++)for(var w=g+1;w<l.length;w++)m=this.options.kind(l[g].data,l[w].data,this.options.sim).toFixed(4),m in v?v[m].push([g,w]):v[m]=[[g,w]],p=Math.min(m,p);for(var y,M,x=v[p.toFixed(4)],b=[];x.length>0;){y=x.shift();for(var k=x.length-1;k>=0;k--)M=x[k].filter(function(t){return-1!=y.indexOf(t)}),M.length>0&&(y=o(y.concat(x[k])),k=x.length-1,x.splice(k,1));b.push(y)}for(var A=0;A<b.length;A++){for(var S={dis:void 0,data:void 0,children:[]},q=[],D=0;D<b[A].length;D++){var j=b[A][D];q=q.concat(l[j].data),l[j].dis=p,S.children.push(l[j]),delete l[j]}S.data=q.concat(),l.push(S)}for(var C=0;C<l.length;C++)void 0===l[C]&&(l.splice(C,1),C--)}l[0].dis=0,this.tree=l[0]}var u={sim:n,kind:"single"};f.prototype.getDendogram=function(t){if(t=t||{length:this.len,ND:!0},t.length!==this.len)throw new Error("Invalid input size");for(var r=JSON.parse(JSON.stringify(this.tree)),n=[r];n.length>0;){var o=n.shift();if(1===o.data.length)o.data=t.ND?o.data[0]:t[o.index],delete o.index;else{delete o.data,delete o.index;for(var e=0;e<o.children.length;e++)n.push(o.children[e])}}return r},f.prototype.nClusters=function(t){if(t>=this.len)throw new RangeError("Too many clusters");for(var r=[this.tree];r.length<t;)for(var n=r.shift(),o=0;o<n.children.length;o++)r.push(n.children[o]);for(var e=new Array(r.length),i=0;i<r.length;i++){var s=r[i];e[i]=s.data.concat()}return e},r.exports=f},{}],59:[function(t,r){"use strict";function n(t,r){for(var n=0,o=t.length,e=0;o>n;n++)e+=(t[n]-r[n])*(t[n]-r[n]);return Math.sqrt(e)}function o(t,r,n){for(var o=1e101,e=0;e<t.length;e++)for(var i=e;i<r.length;i++){var s=n(t[e],r[i]);o=Math.min(s,o)}return o}function e(t,r,n){for(var o=-1,e=0;e<t.length;e++)for(var i=e;i<r.length;i++){var s=n(t[e],r[i]);o=Math.max(s,o)}return o}function i(t,r,n){for(var o=0,e=0;e<t.length;e++)for(var i=0;i<r.length;i++)o+=n(t[e],r[i]);return o/(t.length*r.length)}function s(t,r,n){for(var o=0,e=0,i=0,s=0,a=0;a<t.length;a++)o+=t[a][0],e+=t[a][1];for(var h=0;h<r.length;h++)i+=r[h][0],s+=r[h][1];return o/=t.length,e/=t.length,i/=r.length,s/=r.length,n([o,e],[i,s])}function a(t,r,n){for(var o=0,e=0,i=0,s=0,a=0;a<t.length;a++)o+=t[a][0],e+=t[a][1];for(var h=0;h<r.length;h++)i+=r[h][0],s+=r[h][1];return o/=t.length,e/=t.length,i/=r.length,s/=r.length,n([o,e],[i,s])*t.length*r.length/(t.length+r.length)}function h(t,r,n){for(var o,e,i={d:0,p:0},s=0;s<t.length;s++){o=0;for(var a=0;a<t.length;a++)s!==a&&(o+=n(t[s],t[a]));o/=t.length-1,e=0;for(var h=0;h<r.length;h++)e+=n(t[s],r[h]);e/=r.length,o-e>i.d&&(i.d=o-e,i.p=s)}return i}function f(t,r){r=r||{},this.options={};for(var n in u)this.options[n]=r.hasOwnProperty(n)?r[n]:u[n];if(this.len=t.length,"string"==typeof this.options.kind)switch(this.options.kind){case"single":this.options.kind=o;break;case"complete":this.options.kind=e;break;case"average":this.options.kind=i;break;case"centroid":this.options.kind=s;break;case"ward":this.options.kind=a;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof this.options.kind)throw new TypeError("Undefined kind of similarity");for(var f={},c=0;c<t.length;c++)f[t[c][0]]?f[t[c][0]][t[c][1]]=c:(f[t[c][0]]={},f[t[c][0]][t[c][1]]=c);this.tree={dis:0,data:t,children:[]};for(var l,d,p,v,m,g=[this.tree];0!==g.length;){d=0,p=0;for(var w=0;w<g.length;w++){l=0;for(var y=0;y<g[w].length;y++)for(var M=y+1;M<g[w].length;M++)l=Math.max(this.options.sim(g[w].data[y],g[w].data[M]),l);l>d&&(d=l,p=w)}d=0;var x={dis:void 0,data:g[p].data.concat(),children:[]},b={dis:void 0,data:[],children:[]};g[p].children=[x,b],g.splice(p,1);for(var k=0;k<x.data.length;k++){v=0;for(var A=0;A<x.data.length;A++)k!==A&&(v+=this.options.sim(x.data[A],x.data[k]));v/=x.data.length-1,v>d&&(d=v,m=k)}for(b.data=[x.data[m]],x.data.splice(m,1),v=h(x.data,b.data,this.options.sim);v.d>0;)b.data.push(x.data[v.p]),x.data.splice(v.p,1),v=h(x.data,b.data,this.options.sim);x.dis=this.options.kind(x.data,b.data,this.options.sim),b.dis=x.dis,1===x.data.length?x.index=f[x.data[0][0]][x.data[0][1]]:g.push(x),1===b.data.length?b.index=f[b.data[0][0]][b.data[0][1]]:g.push(b)}}var u={sim:n,kind:"single"};f.prototype.getDendogram=function(t){if(t=t||{length:this.len,ND:!0},t.length!==this.len)throw new Error("Invalid input size");for(var r=JSON.parse(JSON.stringify(this.tree)),n=[r];n.length>0;){var o=n.shift();if(1===o.data.length)o.data=t.ND?o.data[0]:t[o.index],delete o.index;else{delete o.data,delete o.index;for(var e=0;e<o.children.length;e++)n.push(o.children[e])}}return r},f.prototype.nClusters=function(t){if(t>=this.len)throw new RangeError("Too many clusters");for(var r=[this.tree];r.length<t;)for(var n=r.shift(),o=0;o<n.children.length;o++)r.push(n.children[o]);for(var e=new Array(r.length),i=0;i<r.length;i++){var s=r[i];e[i]=s.data.concat()}return e},r.exports=f},{}],60:[function(t,r,n){n.agnes=t("./agnes"),n.diana=t("./diana")},{"./agnes":58,"./diana":59}],61:[function(t,r){r.exports=t("./kmeans")},{"./kmeans":62}],62:[function(t,r){"use strict";function n(t,r){for(var n=0,o=t.length,e=0;o>e;e++)n+=(t[e]-r[e])*(t[e]-r[e]);return n}function o(t,r,o){for(var e=0,i=t.length,s=0,a=0;i>a;a++)s=o[a],e+=n(t[a],r[s]);return e}function e(t,r){for(var o=t.length,e=r.length,i=0,s=new Array(o),a=0;o>a;a++)s[a]=0;for(var h=new Array(o),a=0;o>a;a++){h[a]=new Array(e);for(var f=0;e>f;f++)i=n(t[a],r[f]),h[a][f]=new Array(2),h[a][f][0]=i,h[a][f][1]=f;for(var u=h[a][0][0],c=0,f=0;e>f;f++)h[a][f][0]<u&&(u=h[a][f][0],c=h[a][f][1]);s[a]=c}return s}function i(t,r,n){for(var o=t[0].length,e=t.length,i=new Array(n),s=0;n>s;s++){i[s]=new Array(o);for(var a=0;o>a;a++)i[s][a]=0}for(var h=0;n>h;h++){for(var f=[],s=0;e>s;s++)r[s]==h&&f.push(t[s]);for(var u=0;o>u;u++){for(var c=[],s=0;e>s;s++)r[s]==h&&c.push(t[s][u]);for(var l=0,d=c.length,s=0;d>s;s++)l+=c[s];i[h][u]=l/d}}return i}function s(t,r,n,s){n="undefined"==typeof n?100:n,s="undefined"==typeof s?1e-6:s;var a=t.length;if(0==a)return[];for(var h=r.length,f=new Array(a),u=0;a>u;u++)f[u]=0;if(h>=a){for(var u=0;a>u;u++)f[u]=u;return f}var c;c=1e100;for(var l=0,d=0;n>d;d++){if(f=e(t,r),r=i(t,f,h),l=o(t,r,f),s>c-l||s>(c-l)/c)return f;c=l}return f}r.exports=s},{}],63:[function(t,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(t=o.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");var r,e,i,s=t,a=s.rows,h=new o(a,a),f=!0;for(e=0;a>e;e++){var u=h[e],c=0;for(i=0;e>i;i++){var l=h[i],d=0;for(r=0;i>r;r++)d+=l[r]*u[r];u[i]=d=(s[e][i]-d)/h[i][i],c+=d*d}for(c=s[e][e]-c,f&=c>0,h[e][e]=Math.sqrt(Math.max(c,0)),i=e+1;a>i;i++)h[e][i]=0}if(!f)throw new Error("Matrix is not positive definite");this.L=h}var o=t("../matrix");n.prototype={get leftTriangularFactor(){return this.L},solve:function(t){t=o.checkMatrix(t);var r=this.L,n=r.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var e,i,s,a=t.columns,h=t.clone();for(s=0;n>s;s++)for(i=0;a>i;i++){for(e=0;s>e;e++)h[s][i]-=h[e][i]*r[s][e];h[s][i]/=r[s][s]}for(s=n-1;s>=0;s--)for(i=0;a>i;i++){for(e=s+1;n>e;e++)h[s][i]-=h[e][i]*r[e][s];h[s][i]/=r[s][s]}return h}},r.exports=n},{"../matrix":71}],64:[function(t,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(t=h.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");var r,a,f=t.columns,u=h.zeros(f,f),c=new Array(f),l=new Array(f),d=t;if(t.isSymmetric()){for(r=0;f>r;r++)for(a=0;f>a;a++)u[r][a]=d[r][a];o(f,l,c,u),e(f,l,c,u)}else{var p=h.zeros(f,f),v=new Array(f);for(a=0;f>a;a++)for(r=0;f>r;r++)p[r][a]=d[r][a];i(f,p,v,u),s(f,l,c,u,p)}this.n=f,this.e=l,this.d=c,this.V=u}function o(t,r,n,o){var e,i,s,a,h,f,u,c;for(h=0;t>h;h++)n[h]=o[t-1][h];for(a=t-1;a>0;a--){for(c=0,s=0,f=0;a>f;f++)c+=Math.abs(n[f]);if(0===c)for(r[a]=n[a-1],h=0;a>h;h++)n[h]=o[a-1][h],o[a][h]=0,o[h][a]=0;else{for(f=0;a>f;f++)n[f]/=c,s+=n[f]*n[f];for(e=n[a-1],i=Math.sqrt(s),e>0&&(i=-i),r[a]=c*i,s-=e*i,n[a-1]=e-i,h=0;a>h;h++)r[h]=0;for(h=0;a>h;h++){for(e=n[h],o[h][a]=e,i=r[h]+o[h][h]*e,f=h+1;a-1>=f;f++)i+=o[f][h]*n[f],r[f]+=o[f][h]*e;r[h]=i}for(e=0,h=0;a>h;h++)r[h]/=s,e+=r[h]*n[h];for(u=e/(s+s),h=0;a>h;h++)r[h]-=u*n[h];for(h=0;a>h;h++){for(e=n[h],i=r[h],f=h;a-1>=f;f++)o[f][h]-=e*r[f]+i*n[f];n[h]=o[a-1][h],o[a][h]=0}}n[a]=s}for(a=0;t-1>a;a++){if(o[t-1][a]=o[a][a],o[a][a]=1,s=n[a+1],0!==s){for(f=0;a>=f;f++)n[f]=o[f][a+1]/s;for(h=0;a>=h;h++){for(i=0,f=0;a>=f;f++)i+=o[f][a+1]*o[f][h];for(f=0;a>=f;f++)o[f][h]-=i*n[f]}}for(f=0;a>=f;f++)o[f][a+1]=0}for(h=0;t>h;h++)n[h]=o[t-1][h],o[t-1][h]=0;o[t-1][t-1]=1,r[0]=0}function e(t,r,n,o){var e,i,s,a,h,u,c,l,d,p,v,m,g,w,y,M,x;for(s=1;t>s;s++)r[s-1]=r[s];r[t-1]=0;var b=0,k=0,A=Math.pow(2,-52);for(u=0;t>u;u++){for(k=Math.max(k,Math.abs(n[u])+Math.abs(r[u])),c=u;t>c&&!(Math.abs(r[c])<=A*k);)c++;if(c>u){x=0;do{for(x+=1,e=n[u],l=(n[u+1]-e)/(2*r[u]),d=f(l,1),0>l&&(d=-d),n[u]=r[u]/(l+d),n[u+1]=r[u]*(l+d),p=n[u+1],i=e-n[u],s=u+2;t>s;s++)n[s]-=i;for(b+=i,l=n[c],v=1,m=v,g=v,w=r[u+1],y=0,M=0,s=c-1;s>=u;s--)for(g=m,m=v,M=y,e=v*r[s],i=v*l,d=f(l,r[s]),r[s+1]=y*d,y=r[s]/d,v=l/d,l=v*n[s]-y*e,n[s+1]=i+y*(v*e+y*n[s]),h=0;t>h;h++)i=o[h][s+1],o[h][s+1]=y*o[h][s]+v*i,o[h][s]=v*o[h][s]-y*i;l=-y*M*g*w*r[u]/p,r[u]=y*l,n[u]=v*l}while(Math.abs(r[u])>A*k)}n[u]=n[u]+b,r[u]=0}for(s=0;t-1>s;s++){for(h=s,l=n[s],a=s+1;t>a;a++)n[a]<l&&(h=a,l=n[a]);if(h!==s)for(n[h]=n[s],n[s]=l,a=0;t>a;a++)l=o[a][s],o[a][s]=o[a][h],o[a][h]=l}}function i(t,r,n,o){var e,i,s,a,h,f,u,c=0,l=t-1;for(f=c+1;l-1>=f;f++){for(u=0,a=f;l>=a;a++)u+=Math.abs(r[a][f-1]);if(0!==u){for(s=0,a=l;a>=f;a--)n[a]=r[a][f-1]/u,s+=n[a]*n[a];for(i=Math.sqrt(s),n[f]>0&&(i=-i),s-=n[f]*i,n[f]=n[f]-i,h=f;t>h;h++){for(e=0,a=l;a>=f;a--)e+=n[a]*r[a][h];for(e/=s,a=f;l>=a;a++)r[a][h]-=e*n[a]}for(a=0;l>=a;a++){for(e=0,h=l;h>=f;h--)e+=n[h]*r[a][h];for(e/=s,h=f;l>=h;h++)r[a][h]-=e*n[h]}n[f]=u*n[f],r[f][f-1]=u*i}}for(a=0;t>a;a++)for(h=0;t>h;h++)o[a][h]=a===h?1:0;for(f=l-1;f>=c+1;f--)if(0!==r[f][f-1]){for(a=f+1;l>=a;a++)n[a]=r[a][f-1];for(h=f;l>=h;h++){for(i=0,a=f;l>=a;a++)i+=n[a]*o[a][h];for(i=i/n[f]/r[f][f-1],a=f;l>=a;a++)o[a][h]+=i*n[a]}}}function s(t,r,n,o,e){var i,s,h,f,u,c,l,d,p,v,m,g,w,y,M,x=t-1,b=0,k=t-1,A=Math.pow(2,-52),S=0,q=0,D=0,j=0,C=0,R=0,z=0,O=0;for(i=0;t>i;i++)for((b>i||i>k)&&(n[i]=e[i][i],r[i]=0),s=Math.max(i-1,0);t>s;s++)q+=Math.abs(e[i][s]);for(;x>=b;){for(f=x;f>b&&(R=Math.abs(e[f-1][f-1])+Math.abs(e[f][f]),0===R&&(R=q),!(Math.abs(e[f][f-1])<A*R));)f--;if(f===x)e[x][x]=e[x][x]+S,n[x]=e[x][x],r[x]=0,x--,O=0;else if(f===x-1){if(l=e[x][x-1]*e[x-1][x],D=(e[x-1][x-1]-e[x][x])/2,j=D*D+l,z=Math.sqrt(Math.abs(j)),e[x][x]=e[x][x]+S,e[x-1][x-1]=e[x-1][x-1]+S,d=e[x][x],j>=0){for(z=D>=0?D+z:D-z,n[x-1]=d+z,n[x]=n[x-1],0!==z&&(n[x]=d-l/z),r[x-1]=0,r[x]=0,d=e[x][x-1],R=Math.abs(d)+Math.abs(z),D=d/R,j=z/R,C=Math.sqrt(D*D+j*j),D/=C,j/=C,s=x-1;t>s;s++)z=e[x-1][s],e[x-1][s]=j*z+D*e[x][s],e[x][s]=j*e[x][s]-D*z;for(i=0;x>=i;i++)z=e[i][x-1],e[i][x-1]=j*z+D*e[i][x],e[i][x]=j*e[i][x]-D*z;for(i=b;k>=i;i++)z=o[i][x-1],o[i][x-1]=j*z+D*o[i][x],o[i][x]=j*o[i][x]-D*z}else n[x-1]=d+D,n[x]=d+D,r[x-1]=z,r[x]=-z;x-=2,O=0}else{if(d=e[x][x],p=0,l=0,x>f&&(p=e[x-1][x-1],l=e[x][x-1]*e[x-1][x]),10===O){for(S+=d,i=b;x>=i;i++)e[i][i]-=d;R=Math.abs(e[x][x-1])+Math.abs(e[x-1][x-2]),d=p=.75*R,l=-.4375*R*R}if(30===O&&(R=(p-d)/2,R=R*R+l,R>0)){for(R=Math.sqrt(R),d>p&&(R=-R),R=d-l/((p-d)/2+R),i=b;x>=i;i++)e[i][i]-=R;S+=R,d=p=l=.964}for(O+=1,u=x-2;u>=f&&(z=e[u][u],C=d-z,R=p-z,D=(C*R-l)/e[u+1][u]+e[u][u+1],j=e[u+1][u+1]-z-C-R,C=e[u+2][u+1],R=Math.abs(D)+Math.abs(j)+Math.abs(C),D/=R,j/=R,C/=R,u!==f)&&!(Math.abs(e[u][u-1])*(Math.abs(j)+Math.abs(C))<A*Math.abs(D)*(Math.abs(e[u-1][u-1])+Math.abs(z)+Math.abs(e[u+1][u+1])));)u--;for(i=u+2;x>=i;i++)e[i][i-2]=0,i>u+2&&(e[i][i-3]=0);for(h=u;x-1>=h&&(y=h!==x-1,h!==u&&(D=e[h][h-1],j=e[h+1][h-1],C=y?e[h+2][h-1]:0,d=Math.abs(D)+Math.abs(j)+Math.abs(C),0!==d&&(D/=d,j/=d,C/=d)),0!==d);h++)if(R=Math.sqrt(D*D+j*j+C*C),0>D&&(R=-R),0!==R){for(h!==u?e[h][h-1]=-R*d:f!==u&&(e[h][h-1]=-e[h][h-1]),D+=R,d=D/R,p=j/R,z=C/R,j/=D,C/=D,s=h;t>s;s++)D=e[h][s]+j*e[h+1][s],y&&(D+=C*e[h+2][s],e[h+2][s]=e[h+2][s]-D*z),e[h][s]=e[h][s]-D*d,e[h+1][s]=e[h+1][s]-D*p;for(i=0;i<=Math.min(x,h+3);i++)D=d*e[i][h]+p*e[i][h+1],y&&(D+=z*e[i][h+2],e[i][h+2]=e[i][h+2]-D*C),e[i][h]=e[i][h]-D,e[i][h+1]=e[i][h+1]-D*j;for(i=b;k>=i;i++)D=d*o[i][h]+p*o[i][h+1],y&&(D+=z*o[i][h+2],o[i][h+2]=o[i][h+2]-D*C),o[i][h]=o[i][h]-D,o[i][h+1]=o[i][h+1]-D*j}}}if(0!==q){for(x=t-1;x>=0;x--)if(D=n[x],j=r[x],0===j)for(f=x,e[x][x]=1,i=x-1;i>=0;i--){for(l=e[i][i]-D,C=0,s=f;x>=s;s++)C+=e[i][s]*e[s][x];if(r[i]<0)z=l,R=C;else if(f=i,0===r[i]?e[i][x]=0!==l?-C/l:-C/(A*q):(d=e[i][i+1],p=e[i+1][i],j=(n[i]-D)*(n[i]-D)+r[i]*r[i],c=(d*R-z*C)/j,e[i][x]=c,e[i+1][x]=Math.abs(d)>Math.abs(z)?(-C-l*c)/d:(-R-p*c)/z),c=Math.abs(e[i][x]),A*c*c>1)for(s=i;x>=s;s++)e[s][x]=e[s][x]/c}else if(0>j)for(f=x-1,Math.abs(e[x][x-1])>Math.abs(e[x-1][x])?(e[x-1][x-1]=j/e[x][x-1],e[x-1][x]=-(e[x][x]-D)/e[x][x-1]):(M=a(0,-e[x-1][x],e[x-1][x-1]-D,j),e[x-1][x-1]=M[0],e[x-1][x]=M[1]),e[x][x-1]=0,e[x][x]=1,i=x-2;i>=0;i--){for(v=0,m=0,s=f;x>=s;s++)v+=e[i][s]*e[s][x-1],m+=e[i][s]*e[s][x];if(l=e[i][i]-D,r[i]<0)z=l,C=v,R=m;else if(f=i,0===r[i]?(M=a(-v,-m,l,j),e[i][x-1]=M[0],e[i][x]=M[1]):(d=e[i][i+1],p=e[i+1][i],g=(n[i]-D)*(n[i]-D)+r[i]*r[i]-j*j,w=2*(n[i]-D)*j,0===g&&0===w&&(g=A*q*(Math.abs(l)+Math.abs(j)+Math.abs(d)+Math.abs(p)+Math.abs(z))),M=a(d*C-z*v+j*m,d*R-z*m-j*v,g,w),e[i][x-1]=M[0],e[i][x]=M[1],Math.abs(d)>Math.abs(z)+Math.abs(j)?(e[i+1][x-1]=(-v-l*e[i][x-1]+j*e[i][x])/d,e[i+1][x]=(-m-l*e[i][x]-j*e[i][x-1])/d):(M=a(-C-p*e[i][x-1],-R-p*e[i][x],z,j),e[i+1][x-1]=M[0],e[i+1][x]=M[1])),c=Math.max(Math.abs(e[i][x-1]),Math.abs(e[i][x])),A*c*c>1)for(s=i;x>=s;s++)e[s][x-1]=e[s][x-1]/c,e[s][x]=e[s][x]/c}for(i=0;t>i;i++)if(b>i||i>k)for(s=i;t>s;s++)o[i][s]=e[i][s];for(s=t-1;s>=b;s--)for(i=b;k>=i;i++){for(z=0,h=b;h<=Math.min(s,k);h++)z+=o[i][h]*e[h][s];o[i][s]=z}}}function a(t,r,n,o){var e,i;return Math.abs(n)>Math.abs(o)?(e=o/n,i=n+e*o,[(t+e*r)/i,(r-e*t)/i]):(e=n/o,i=o+e*n,[(e*t+r)/i,(e*r-t)/i])}var h=t("../matrix"),f=t("./util").hypotenuse;n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var t,r,n=this.n,o=this.e,e=this.d,i=new h(n,n);for(t=0;n>t;t++){for(r=0;n>r;r++)i[t][r]=0;i[t][t]=e[t],o[t]>0?i[t][t+1]=o[t]:o[t]<0&&(i[t][t-1]=o[t])}return i}},r.exports=n},{"../matrix":71,"./util":68}],65:[function(t,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);t=o.checkMatrix(t);var r,e,i,s,a,h,f,u,c,l,d=t.clone(),p=d.rows,v=d.columns,m=new Array(p),g=1;for(r=0;p>r;r++)m[r]=r;for(c=new Array(p),e=0;v>e;e++){for(r=0;p>r;r++)c[r]=d[r][e];for(r=0;p>r;r++){for(u=d[r],l=Math.min(r,e),a=0,i=0;l>i;i++)a+=u[i]*c[i];u[e]=c[r]-=a}for(s=e,r=e+1;p>r;r++)Math.abs(c[r])>Math.abs(c[s])&&(s=r);if(s!==e){for(i=0;v>i;i++)h=d[s][i],d[s][i]=d[e][i],d[e][i]=h;f=m[s],m[s]=m[e],m[e]=f,g=-g}if(p>e&&0!==d[e][e])for(r=e+1;p>r;r++)d[r][e]/=d[e][e]}this.LU=d,this.pivotVector=m,this.pivotSign=g}var o=t("../matrix");n.prototype={isSingular:function(){for(var t=this.LU,r=t.columns,n=0;r>n;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,n=t.columns,o=0;n>o;o++)r*=t[o][o];return r},get lowerTriangularFactor(){for(var t=this.LU,r=t.rows,n=t.columns,e=new o(r,n),i=0;r>i;i++)for(var s=0;n>s;s++)e[i][s]=i>s?t[i][s]:i===s?1:0;
return e},get upperTriangularFactor(){for(var t=this.LU,r=t.rows,n=t.columns,e=new o(r,n),i=0;r>i;i++)for(var s=0;n>s;s++)e[i][s]=s>=i?t[i][s]:0;return e},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=o.checkMatrix(t);var r=this.LU,n=r.rows;if(n!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e,i,s,a=t.columns,h=t.subMatrixRow(this.pivotVector,0,a-1),f=r.columns;for(s=0;f>s;s++)for(e=s+1;f>e;e++)for(i=0;a>i;i++)h[e][i]-=h[s][i]*r[e][s];for(s=f-1;s>=0;s--){for(i=0;a>i;i++)h[s][i]/=r[s][s];for(e=0;s>e;e++)for(i=0;a>i;i++)h[e][i]-=h[s][i]*r[e][s]}return h}},r.exports=n},{"../matrix":71}],66:[function(t,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);t=o.checkMatrix(t);var r,i,s,a,h=t.clone(),f=t.rows,u=t.columns,c=new Array(u);for(s=0;u>s;s++){var l=0;for(r=s;f>r;r++)l=e(l,h[r][s]);if(0!==l){for(h[s][s]<0&&(l=-l),r=s;f>r;r++)h[r][s]/=l;for(h[s][s]+=1,i=s+1;u>i;i++){for(a=0,r=s;f>r;r++)a+=h[r][s]*h[r][i];for(a=-a/h[s][s],r=s;f>r;r++)h[r][i]+=a*h[r][s]}}c[s]=-l}this.QR=h,this.Rdiag=c}var o=t("../matrix"),e=t("./util").hypotenuse;n.prototype={solve:function(t){t=o.checkMatrix(t);var r=this.QR,n=r.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var e,i,s,a,h=t.columns,f=t.clone(),u=r.columns;for(s=0;u>s;s++)for(i=0;h>i;i++){for(a=0,e=s;n>e;e++)a+=r[e][s]*f[e][i];for(a=-a/r[s][s],e=s;n>e;e++)f[e][i]+=a*r[e][s]}for(s=u-1;s>=0;s--){for(i=0;h>i;i++)f[s][i]/=this.Rdiag[s];for(e=0;s>e;e++)for(i=0;h>i;i++)f[e][i]-=f[s][i]*r[e][s]}return f.subMatrix(0,u-1,0,h-1)},isFullRank:function(){for(var t=this.QR.columns,r=0;t>r;r++)if(0===this.Rdiag[r])return!1;return!0},get upperTriangularFactor(){var t,r,n=this.QR,e=n.columns,i=new o(e,e);for(t=0;e>t;t++)for(r=0;e>r;r++)i[t][r]=r>t?n[t][r]:t===r?this.Rdiag[t]:0;return i},get orthogonalFactor(){var t,r,n,e,i=this.QR,s=i.rows,a=i.columns,h=new o(s,a);for(n=a-1;n>=0;n--){for(t=0;s>t;t++)h[t][n]=0;for(h[n][n]=1,r=n;a>r;r++)if(0!==i[n][n]){for(e=0,t=n;s>t;t++)e+=i[t][n]*h[t][r];for(e=-e/i[n][n],t=n;s>t;t++)h[t][r]+=e*i[t][n]}}return h}},r.exports=n},{"../matrix":71,"./util":68}],67:[function(t,r){"use strict";function n(t,r){if(!(this instanceof n))return new n(t,r);t=o.checkMatrix(t),r=r||{};var i=t.clone(),s=t.rows,a=t.columns,h=Math.min(s,a),f=!0,u=!0;r.computeLeftSingularVectors===!1&&(f=!1),r.computeRightSingularVectors===!1&&(u=!1);var c=r.autoTranspose===!0,l=!1;if(a>s)if(c){i=i.transpose(),s=i.rows,a=i.columns,l=!0;var d=f;f=u,u=d}else console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");var p,v,m,g,w,y,M,x,b,k,A,S,q,D,j,C,R,z,O,E,V,I=new Array(Math.min(s+1,a)),T=o.zeros(s,h),U=o.zeros(a,a),N=new Array(a),L=new Array(s),P=Math.min(s-1,a),W=Math.max(0,Math.min(a-2,s));for(m=0,k=Math.max(P,W);k>m;m++){if(P>m){for(I[m]=0,p=m;s>p;p++)I[m]=e(I[m],i[p][m]);if(0!==I[m]){for(i[m][m]<0&&(I[m]=-I[m]),p=m;s>p;p++)i[p][m]/=I[m];i[m][m]+=1}I[m]=-I[m]}for(v=m+1;a>v;v++){if(P>m&&0!==I[m]){for(w=0,p=m;s>p;p++)w+=i[p][m]*i[p][v];for(w=-w/i[m][m],p=m;s>p;p++)i[p][v]+=w*i[p][m]}N[v]=i[m][v]}if(f&&P>m)for(p=m;s>p;p++)T[p][m]=i[p][m];if(W>m){for(N[m]=0,p=m+1;a>p;p++)N[m]=e(N[m],N[p]);if(0!==N[m]){for(N[m+1]<0&&(N[m]=-N[m]),p=m+1;a>p;p++)N[p]/=N[m];N[m+1]+=1}if(N[m]=-N[m],s>m+1&&0!==N[m]){for(p=m+1;s>p;p++)L[p]=0;for(v=m+1;a>v;v++)for(p=m+1;s>p;p++)L[p]+=N[v]*i[p][v];for(v=m+1;a>v;v++)for(w=-N[v]/N[m+1],p=m+1;s>p;p++)i[p][v]+=w*L[p]}if(u)for(p=m+1;a>p;p++)U[p][m]=N[p]}}if(g=Math.min(a,s+1),a>P&&(I[P]=i[P][P]),g>s&&(I[g-1]=0),g>W+1&&(N[W]=i[W][g-1]),N[g-1]=0,f){for(v=P;h>v;v++){for(p=0;s>p;p++)T[p][v]=0;T[v][v]=1}for(m=P-1;m>=0;m--)if(0!==I[m]){for(v=m+1;h>v;v++){for(w=0,p=m;s>p;p++)w+=T[p][m]*T[p][v];for(w=-w/T[m][m],p=m;s>p;p++)T[p][v]+=w*T[p][m]}for(p=m;s>p;p++)T[p][m]=-T[p][m];for(T[m][m]=1+T[m][m],p=0;m-1>p;p++)T[p][m]=0}else{for(p=0;s>p;p++)T[p][m]=0;T[m][m]=1}}if(u)for(m=a-1;m>=0;m--){if(W>m&&0!==N[m])for(v=m+1;a>v;v++){for(w=0,p=m+1;a>p;p++)w+=U[p][m]*U[p][v];for(w=-w/U[m+1][m],p=m+1;a>p;p++)U[p][v]+=w*U[p][m]}for(p=0;a>p;p++)U[p][m]=0;U[m][m]=1}for(var _=g-1,H=0,F=Math.pow(2,-52);g>0;){for(m=g-2;m>=-1&&-1!==m;m--)if(Math.abs(N[m])<=F*(Math.abs(I[m])+Math.abs(I[m+1]))){N[m]=0;break}if(m===g-2)A=4;else{for(y=g-1;y>=m&&y!==m;y--)if(w=(y!==g?Math.abs(N[y]):0)+(y!==m+1?Math.abs(N[y-1]):0),Math.abs(I[y])<=F*w){I[y]=0;break}y===m?A=3:y===g-1?A=1:(A=2,m=y)}switch(m++,A){case 1:for(M=N[g-2],N[g-2]=0,v=g-2;v>=m;v--)if(w=e(I[v],M),x=I[v]/w,b=M/w,I[v]=w,v!==m&&(M=-b*N[v-1],N[v-1]=x*N[v-1]),u)for(p=0;a>p;p++)w=x*U[p][v]+b*U[p][g-1],U[p][g-1]=-b*U[p][v]+x*U[p][g-1],U[p][v]=w;break;case 2:for(M=N[m-1],N[m-1]=0,v=m;g>v;v++)if(w=e(I[v],M),x=I[v]/w,b=M/w,I[v]=w,M=-b*N[v],N[v]=x*N[v],f)for(p=0;s>p;p++)w=x*T[p][v]+b*T[p][m-1],T[p][m-1]=-b*T[p][v]+x*T[p][m-1],T[p][v]=w;break;case 3:for(S=Math.max(Math.max(Math.max(Math.max(Math.abs(I[g-1]),Math.abs(I[g-2])),Math.abs(N[g-2])),Math.abs(I[m])),Math.abs(N[m])),q=I[g-1]/S,D=I[g-2]/S,j=N[g-2]/S,C=I[m]/S,R=N[m]/S,z=((D+q)*(D-q)+j*j)/2,O=q*j*q*j,E=0,(0!==z||0!==O)&&(E=Math.sqrt(z*z+O),0>z&&(E=-E),E=O/(z+E)),M=(C+q)*(C-q)+E,V=C*R,v=m;g-1>v;v++){if(w=e(M,V),x=M/w,b=V/w,v!==m&&(N[v-1]=w),M=x*I[v]+b*N[v],N[v]=x*N[v]-b*I[v],V=b*I[v+1],I[v+1]=x*I[v+1],u)for(p=0;a>p;p++)w=x*U[p][v]+b*U[p][v+1],U[p][v+1]=-b*U[p][v]+x*U[p][v+1],U[p][v]=w;if(w=e(M,V),x=M/w,b=V/w,I[v]=w,M=x*N[v]+b*I[v+1],I[v+1]=-b*N[v]+x*I[v+1],V=b*N[v+1],N[v+1]=x*N[v+1],f&&s-1>v)for(p=0;s>p;p++)w=x*T[p][v]+b*T[p][v+1],T[p][v+1]=-b*T[p][v]+x*T[p][v+1],T[p][v]=w}N[g-2]=M,H+=1;break;case 4:if(I[m]<=0&&(I[m]=I[m]<0?-I[m]:0,u))for(p=0;_>=p;p++)U[p][m]=-U[p][m];for(;_>m&&!(I[m]>=I[m+1]);){if(w=I[m],I[m]=I[m+1],I[m+1]=w,u&&a-1>m)for(p=0;a>p;p++)w=U[p][m+1],U[p][m+1]=U[p][m],U[p][m]=w;if(f&&s-1>m)for(p=0;s>p;p++)w=T[p][m+1],T[p][m+1]=T[p][m],T[p][m]=w;m++}H=0,g--}}if(l){var Q=U;U=T,T=Q}this.m=s,this.n=a,this.s=I,this.U=T,this.V=U}var o=t("../matrix"),e=t("./util").hypotenuse;n.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=Math.pow(2,-52),r=Math.max(this.m,this.n)*this.s[0]*t,n=0,o=this.s,e=0,i=o.length;i>e;e++)o[e]>r&&n++;return n},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return o.diag(this.s)},solve:function(t){var r,n=t,e=this.threshold,i=this.s.length,s=o.zeros(i,i);for(r=0;i>r;r++)s[r][r]=Math.abs(this.s[r])<=e?0:1/this.s[r];var a,h,f,u=this.V.mmul(s),c=this.V.rows,l=this.U.rows,d=o.zeros(c,l);for(r=0;c>r;r++)for(a=0;l>a;a++){for(f=0,h=0;i>h;h++)f+=u[r][h]*this.U[a][h];d[r][a]=f}return d.mmul(n)},solveForDiagonal:function(t){return this.solve(o.diag(t))},inverse:function(){var t,r,n=this.threshold,e=this.V.rows,i=this.V.columns,s=new o(e,this.s.length);for(t=0;e>t;t++)for(r=0;i>r;r++)s[t][r]=Math.abs(this.s[r])>n?this.V[t][r]/this.s[r]:0;var a,h,f=this.U.rows,u=this.U.columns,c=new o(e,f);for(t=0;e>t;t++)for(r=0;f>r;r++){for(h=0,a=0;u>a;a++)h+=s[t][a]*this.U[r][a];c[t][r]=h}return c}},r.exports=n},{"../matrix":71,"./util":68}],68:[function(t,r,n){"use strict";n.hypotenuse=function(t,r){var n;return Math.abs(t)>Math.abs(r)?(n=r/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==r?(n=t/r,Math.abs(r)*Math.sqrt(1+n*n)):0}},{}],69:[function(t,r){"use strict";function n(t){return o(t,e.eye(t.rows))}function o(t,r){return t.isSquare()?new a(t).solve(r):new h(t).solve(r)}var e=t("./matrix"),i=t("./dc/svd"),s=t("./dc/evd"),a=t("./dc/lu"),h=t("./dc/qr"),f=t("./dc/cholesky");e.prototype.inverse=function(){return n(this)},e.prototype.solve=function(t){return o(this,t)},r.exports={SingularValueDecomposition:i,SVD:i,EigenvalueDecomposition:s,EVD:s,LuDecomposition:a,LU:a,QrDecomposition:h,QR:h,CholeskyDecomposition:f,CHO:f,inverse:n,solve:o}},{"./dc/cholesky":63,"./dc/evd":64,"./dc/lu":65,"./dc/qr":66,"./dc/svd":67,"./matrix":71}],70:[function(t,r){"use strict";r.exports=t("./matrix"),r.exports.Decompositions=r.exports.DC=t("./decompositions")},{"./decompositions":69,"./matrix":71}],71:[function(t,r){"use strict";function n(t){for(var r=0,n=t.length,o=new Array(n);n>r;r++)o[r]=t[r];return o}function o(t){this.message=t||"Unknown matrix error"}function e(t,r){var i,s,a=0;if(Array.isArray(t)){if(s=r,i=s?n(t):t,t=i.length,r=i[0].length,"undefined"==typeof r)throw new o("Data must be a 2D array");if(!(t>0&&r>0))throw new o("Invalid dimensions: "+t+"x"+r);for(;t>a;a++){if(i[a].length!==r)throw new o("Inconsistent array dimensions");s&&(i[a]=n(i[a]))}}else{if("number"!=typeof t)throw new o("Invalid arguments");if(!(t>0&&r>0))throw new o("Invalid dimensions: "+t+"x"+r);for(i=new Array(t);t>a;a++)i[a]=new Array(r)}return Object.defineProperty(i,"rows",{writable:!0,value:t}),Object.defineProperty(i,"columns",{writable:!0,value:r}),i.__proto__=e.prototype,i}var i=Array.prototype.splice,s=Array.prototype.concat;o.prototype=Object.create(Error.prototype),o.prototype.name="MatrixError",o.prototype.constructor=o,e.from1DArray=function(t,r,n){var i,s,a=0;if(i=t*r,i!==n.length)throw new o("Data length does not match given dimensions");for(s=new Array(t);t>a;a++)s[a]=n.slice(a*r,(a+1)*r);return new e(s)},e.rowVector=function(t){return new e([t])},e.columnVector=function(t){for(var r=t.length,n=new Array(r),o=0;r>o;o++)n[o]=[t[o]];return new e(n)},e.empty=function(t,r){return new e(t,r)},e.zeros=function(t,r){return e.empty(t,r).fill(0)},e.ones=function(t,r){return e.empty(t,r).fill(1)},e.rand=function(t,r){for(var n=e.empty(t,r),o=0,i=n.rows;i>o;o++)for(var s=0,a=n.columns;a>s;s++)n[o][s]=Math.random();return n},e.eye=function(t){for(var r=e.zeros(t,t),n=r.rows,o=0;n>o;o++)r[o][o]=1;return r},e.diag=function(t){for(var r=t.length,n=e.zeros(r,r),o=0;r>o;o++)n[o][o]=t[o];return n},e.indices=function(t,r){for(var n=new Array(r-t),o=0;o<n.length;o++)n[o]=t++;return n},e.stack=function(t){var r,n,o;if(e.isMatrix(t)){var i=0,s=0;for(r=0;r<arguments.length;r++)i+=arguments[r].rows,arguments[r].columns>s&&(s=arguments[r].columns);var a=e.zeros(i,s),h=0;for(r=0;r<arguments.length;r++){var f=arguments[r];for(n=0;n<f.rows;n++){for(o=0;o<f.columns;o++)a[h][o]=f[n][o];h++}}return a}if(Array.isArray(t)){var u=e.empty(arguments.length,t.length);for(r=0;r<arguments.length;r++)u.setRow(r,arguments[r]);return u}},e.expand=function(t,r){for(var n=[],o=0;o<r.length;o++)for(var i=0;i<r[o];i++)n.push(t[o]);return new e(n)},e.checkMatrix=function(t){if(!t)throw new o("Argument has to be a matrix");return"Matrix"!==t.klass&&(t=new e(t)),t},e.isMatrix=function(t){return t?"Matrix"===t.klass:!1},Object.defineProperty(e.prototype,"klass",{get:function(){return"Matrix"}}),Object.defineProperty(e.prototype,"size",{get:function(){return this.rows*this.columns}}),e.prototype.checkRowIndex=function(t){if(0>t||t>this.rows-1)throw new o("Row index out of range.")},e.prototype.checkColumnIndex=function(t){if(0>t||t>this.columns-1)throw new o("Column index out of range.")},e.prototype.checkDimensions=function(t){if(this.rows!==t.rows||this.columns!==t.columns)throw new o("Matrices dimensions must be equal.")},e.prototype.apply=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)t.call(this,o,e);return this},e.prototype.clone=function(){return new e(this.to2DArray())},e.prototype.to1DArray=function(){return s.apply([],this)},e.prototype.to2DArray=function(){for(var t=this.rows,r=new Array(t),o=0;t>o;o++)r[o]=n(this[o]);return r},e.prototype.isRowVector=function(){return 1===this.rows},e.prototype.isColumnVector=function(){return 1===this.columns},e.prototype.isVector=function(){return 1===this.rows||1===this.columns},e.prototype.isSquare=function(){return this.rows===this.columns},e.prototype.isSymmetric=function(){if(this.isSquare()){for(var t=this.rows,r=0;t>r;r++)for(var n=0;r>=n;n++)if(this[r][n]!==this[n][r])return!1;return!0}return!1},e.prototype.set=function(t,r,n){return this[t][r]=n,this},e.prototype.get=function(t,r){return this[t][r]},e.prototype.fill=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]=t;return this},e.prototype.neg=function(){return this.mulS(-1)},e.prototype.add=function(t){return"number"==typeof t?this.addS(t):(t=e.checkMatrix(t),this.addM(t))},e.prototype.addS=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]+=t;return this},e.prototype.addM=function(t){this.checkDimensions(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]+=t[o][e];return this},e.prototype.sub=function(t){return"number"==typeof t?this.subS(t):(t=e.checkMatrix(t),this.subM(t))},e.prototype.subS=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]-=t;return this},e.prototype.subM=function(t){this.checkDimensions(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]-=t[o][e];return this},e.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):(t=e.checkMatrix(t),this.mulM(t))},e.prototype.mulS=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]*=t;return this},e.prototype.mulM=function(t){this.checkDimensions(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]*=t[o][e];return this},e.prototype.div=function(t){return"number"==typeof t?this.divS(t):(t=e.checkMatrix(t),this.divM(t))},e.prototype.divS=function(t){for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]/=t;return this},e.prototype.divM=function(t){this.checkDimensions(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]/=t[o][e];return this},e.prototype.getRow=function(t){return this.checkRowIndex(t),n(this[t])},e.prototype.setRow=function(t,r){if(this.checkRowIndex(t),e.isMatrix(r)&&(r=r.to1DArray()),r.length!==this.columns)throw new o("Invalid row size");return this[t]=n(r),this},e.prototype.removeRow=function(t){if(this.checkRowIndex(t),1===this.rows)throw new o("A matrix cannot have less than one row");return i.call(this,t,1),this.rows-=1,this},e.prototype.addRow=function(t,r){if("undefined"==typeof r&&(r=t,t=this.rows),0>t||t>this.rows)throw new o("Row index out of range.");if(e.isMatrix(r)&&(r=r.to1DArray()),r.length!==this.columns)throw new o("Invalid row size");return i.call(this,t,0,n(r)),this.rows+=1,this},e.prototype.swapRows=function(t,r){this.checkRowIndex(t),this.checkRowIndex(r);var n=this[t];return this[t]=this[r],this[r]=n,this},e.prototype.getColumn=function(t){this.checkColumnIndex(t);for(var r=this.rows,n=new Array(r),o=0;r>o;o++)n[o]=this[o][t];return n},e.prototype.setColumn=function(t,r){this.checkColumnIndex(t),e.isMatrix(r)&&(r=r.to1DArray());var n=this.rows;if(r.length!==n)throw new o("Invalid column size");for(var i=0;n>i;i++)this[i][t]=r[i];return this},e.prototype.removeColumn=function(t){if(this.checkColumnIndex(t),1===this.columns)throw new o("A matrix cannot have less than one column");for(var r=0,n=this.rows;n>r;r++)this[r].splice(t,1);return this.columns-=1,this},e.prototype.addColumn=function(t,r){if("undefined"==typeof r&&(r=t,t=this.columns),0>t||t>this.columns)throw new o("Column index out of range.");e.isMatrix(r)&&(r=r.to1DArray());var n=this.rows;if(r.length!==n)throw new o("Invalid column size");for(var i=0;n>i;i++)this[i].splice(t,0,r[i]);return this.columns+=1,this},e.prototype.swapColumns=function(t,r){this.checkRowIndex(t),this.checkRowIndex(r);for(var n,o,e=this.rows,i=0;e>i;i++)o=this[i],n=o[t],o[t]=o[r],o[r]=n;return this},e.prototype.checkRowVector=function(t){if(e.isMatrix(t)&&(t=t.to1DArray()),t.length!==this.columns)throw new o("vector size must be the same as the number of columns");return t},e.prototype.checkColumnVector=function(t){if(e.isMatrix(t)&&(t=t.to1DArray()),t.length!==this.rows)throw new o("vector size must be the same as the number of rows");return t},e.prototype.addRowVector=function(t){t=this.checkRowVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]+=t[e];return this},e.prototype.subRowVector=function(t){t=this.checkRowVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]-=t[e];return this},e.prototype.mulRowVector=function(t){t=this.checkRowVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]*=t[e];return this},e.prototype.divRowVector=function(t){t=this.checkRowVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]/=t[e];return this},e.prototype.addColumnVector=function(t){t=this.checkColumnVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]+=t[o];return this},e.prototype.subColumnVector=function(t){t=this.checkColumnVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]-=t[o];return this},e.prototype.mulColumnVector=function(t){t=this.checkColumnVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]*=t[o];return this},e.prototype.divColumnVector=function(t){t=this.checkColumnVector(t);for(var r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]/=t[o];return this},e.prototype.mulRow=function(t,r){this.checkRowIndex(t);for(var n=0,o=this.columns;o>n;n++)this[t][n]*=r;return this},e.prototype.mulColumn=function(t,r){this.checkColumnIndex(t);for(var n=0,o=this.rows;o>n;n++)this[n][t]*=r},e.prototype.max=function(){for(var t=-1/0,r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]>t&&(t=this[o][e]);return t},e.prototype.maxIndex=function(){for(var t=-1/0,r={},n=this.rows,o=this.columns,e=0;n>e;e++)for(var i=0;o>i;i++)this[e][i]>t&&(t=this[e][i],r.row=e,r.column=i);return r},e.prototype.min=function(){for(var t=1/0,r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)this[o][e]<t&&(t=this[o][e]);return t},e.prototype.minIndex=function(){for(var t=1/0,r={},n=this.rows,o=this.columns,e=0;n>e;e++)for(var i=0;o>i;i++)this[e][i]<t&&(t=this[e][i],r.row=e,r.column=i);return r},e.prototype.maxRow=function(t){this.checkRowIndex(t);for(var r=-1/0,n=0,o=this.columns;o>n;n++)this[t][n]>r&&(r=this[t][n]);return r},e.prototype.maxRowIndex=function(t){this.checkRowIndex(t);for(var r=-1/0,n={row:t},o=0,e=this.columns;e>o;o++)this[t][o]>r&&(r=this[t][o],n.column=o);return n},e.prototype.minRow=function(t){this.checkRowIndex(t);for(var r=1/0,n=0,o=this.columns;o>n;n++)this[t][n]<r&&(r=this[t][n]);return r},e.prototype.minRowIndex=function(t){this.checkRowIndex(t);for(var r=1/0,n={row:t,column:0},o=0,e=this.columns;e>o;o++)this[t][o]<r&&(r=this[t][o],n.column=o);return n},e.prototype.maxColumn=function(t){this.checkColumnIndex(t);for(var r=-1/0,n=0,o=this.rows;o>n;n++)this[n][t]>r&&(r=this[n][t]);return r},e.prototype.maxColumnIndex=function(t){this.checkColumnIndex(t);for(var r=-1/0,n={row:0,column:t},o=0,e=this.rows;e>o;o++)this[o][t]>r&&(r=this[o][t],n.row=o);return n},e.prototype.minColumn=function(t){this.checkColumnIndex(t);for(var r=1/0,n=0,o=this.rows;o>n;n++)this[n][t]<r&&(r=this[n][t]);return r},e.prototype.minColumnIndex=function(t){this.checkColumnIndex(t);for(var r=1/0,n={row:0,column:t},o=0,e=this.rows;e>o;o++)this[o][t]<r&&(r=this[o][t],n.row=o);return n},e.prototype.diag=function a(){if(!this.isSquare())throw new o("Only square matrices have a diagonal.");for(var a=new Array(this.rows),t=0,r=this.rows;r>t;t++)a[t]=this[t][t];return a},e.prototype.sum=function(){for(var t=0,r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)t+=this[o][e];return t},e.prototype.mean=function(){return this.sum()/this.size},e.prototype.prod=function h(){for(var h=1,t=this.rows,r=this.columns,n=0;t>n;n++)for(var o=0;r>o;o++)h*=this[n][o];return h},e.prototype.cumulativeSum=function(){for(var t=0,r=this.rows,n=this.columns,o=0;r>o;o++)for(var e=0;n>e;e++)t+=this[o][e],this[o][e]=t;return this},e.prototype.dot=function f(t){if(this.size!==t.size)throw new o("vectors do not have the same size");for(var r=this.to1DArray(),n=t.to1DArray(),f=0,e=r.length,i=0;e>i;i++)f+=r[i]*n[i];return f},e.prototype.mmul=function(t){if(!e.isMatrix(t))throw new o('parameter "other" must be a matrix');this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var r,n,i,s=this.rows,a=this.columns,h=t.columns,f=new e(s,h),u=new Array(a);for(n=0;h>n;n++){for(i=0;a>i;i++)u[i]=t[i][n];for(r=0;s>r;r++){var c=this[r],l=0;for(i=0;a>i;i++)l+=c[i]*u[i];f[r][n]=l}}return f},e.prototype.sortRows=function(t){for(var r=0,n=this.rows;n>r;r++)this[r].sort(t);return this},e.prototype.sortColumns=function(t){for(var r=0,n=this.columns;n>r;r++)this.setColumn(r,this.getColumn(r).sort(t));return this},e.prototype.transpose=function(){for(var t=new e(this.columns,this.rows),r=this.rows,n=this.columns,o=0;r>o;o++)for(var i=0;n>i;i++)t[i][o]=this[o][i];return t},e.prototype.subMatrix=function(t,r,n,i){if(t>r||n>i||0>t||t>=this.rows||0>r||r>=this.rows||0>n||n>=this.columns||0>i||i>=this.columns)throw new o("Argument out of range");for(var s=new e(r-t+1,i-n+1),a=t;r>=a;a++)for(var h=n;i>=h;h++)s[a-t][h-n]=this[a][h];return s},e.prototype.subMatrixRow=function(t,r,n){if("undefined"==typeof r?(r=0,n=this.columns-1):"undefined"==typeof n&&(n=this.columns-1),r>n||0>r||r>=this.columns||0>n||n>=this.columns)throw new o("Argument out of range.");for(var i=t.length,s=this.rows,a=new e(i,n-r+1),h=0;i>h;h++)for(var f=r;n>=f;f++){if(t[h]<0||t[h]>=s)throw new o("Argument out of range.");a[h][f-r]=this[t[h]][f]}return a},e.prototype.subMatrixColumn=function(t,r,n){if("undefined"==typeof r?(r=0,n=this.rows-1):"undefined"==typeof n&&(n=this.rows-1),r>n||0>r||r>=this.rows||0>n||n>=this.rows)throw new o("Argument out of range.");for(var i=t.length,s=this.columns,a=new e(n-r+1,i),h=0;i>h;h++)for(var f=r;n>=f;f++){if(t[h]<0||t[h]>=s)throw new o("Argument out of range.");a[f-r][h]=this[f][t[h]]}return a},e.prototype.trace=function u(){if(!this.isSquare())throw new o("The matrix is not square");for(var u=0,t=0,r=this.rows;r>t;t++)u+=this[t][t];return u},e.prototype.abs=function(){for(var t=this.rows,r=this.columns,n=0;t>n;n++)for(var o=0;r>o;o++)this[n][o]=Math.abs(this[n][o])},e.MatrixError=o,r.exports=e},{}],72:[function(require,module,exports){"use strict";function SOM(t,r,n,o){this.x=t,this.y=r,n=n||{},this.options={};for(var e in defaultOptions)this.options[e]=n.hasOwnProperty(e)?n[e]:defaultOptions[e];if("number"==typeof this.options.fields)this.numWeights=this.options.fields;else{if(!Array.isArray(this.options.fields))throw new Error("Invalid fields definition");this.numWeights=this.options.fields.length;var i=getConverters(this.options.fields);this.extractor=i.extractor,this.creator=i.creator}if("rect"===this.options.gridType)this.nodeType=NodeSquare,this.gridDim={x:t,y:r};else{this.nodeType=NodeHexagonal;var s=this.x-Math.floor(this.y/2);this.gridDim={x:s,y:this.y,z:-(0-s-this.y)}}if(this.torus=this.options.torus,this.distanceMethod=this.torus?"getDistanceTorus":"getDistance",this.distance=this.options.distance,this.maxDistance=getMaxDistance(this.distance,this.numWeights),o===!0)return void(this.done=!0);if(!(t>0&&r>0))throw new Error("x and y must be positive");this.times={findBMU:0,adjust:0},this.randomizer=this.options.randomizer,this.iterationCount=0,this.iterations=this.options.iterations,this.startLearningRate=this.learningRate=this.options.learningRate,this.mapRadius=Math.floor(Math.max(t,r)/2),this.algorithmMethod=this.options.method,this._initNodes(),this.done=!1}function getConverters(t){for(var r=t.length,n=new Array(r),o=new Array(r),e=0;r>e;e++)n[e]=getNormalizer(t[e].range),o[e]=getDenormalizer(t[e].range);return{extractor:function(o){for(var e=new Array(r),i=0;r>i;i++)e[i]=n[i](o[t[i].name]);return e},creator:function(n){for(var e={},i=0;r>i;i++)e[t[i].name]=o[i](n[i]);return e}}}function getNormalizer(t){return function(r){return(r-t[0])/(t[1]-t[0])}}function getDenormalizer(t){return function(r){return t[0]+r*(t[1]-t[0])}}function squareEuclidean(t,r){for(var n=0,o=0,e=t.length;e>o;o++)n+=(t[o]-r[o])*(t[o]-r[o]);return n}function getRandomValue(t,r){return t[Math.floor(r()*t.length)]}function getMaxDistance(t,r){for(var n=new Array(r),o=new Array(r),e=0;r>e;e++)n[e]=0,o[e]=1;return t(n,o)}var NodeSquare=require("./node-square"),NodeHexagonal=require("./node-hexagonal"),defaultOptions={fields:3,randomizer:Math.random,distance:squareEuclidean,iterations:10,learningRate:.1,gridType:"rect",torus:!0,method:"random"};SOM.load=function loadModel(model,distance){if("SOM"===model.name){var x=model.data.length,y=model.data[0].length;distance?model.options.distance=distance:model.options.distance&&(model.options.distance=eval("("+model.options.distance+")"));var som=new SOM(x,y,model.options,!0);som.nodes=new Array(x);for(var i=0;x>i;i++){som.nodes[i]=new Array(y);for(var j=0;y>j;j++)som.nodes[i][j]=new som.nodeType(i,j,model.data[i][j],som)}return som}throw new Error("expecting a SOM model")},SOM.prototype["export"]=function(t){if(!this.done)throw new Error("model is not ready yet");var r={name:"SOM"};r.options={fields:this.options.fields,gridType:this.options.gridType,torus:this.options.torus},r.data=new Array(this.x);for(var n=0;n<this.x;n++){r.data[n]=new Array(this.y);for(var o=0;o<this.y;o++)r.data[n][o]=this.nodes[n][o].weights}return t&&(r.options.distance=this.distance.toString()),r},SOM.prototype._initNodes=function(){var t,r,n,o=Date.now();for(this.nodes=new Array(this.x),t=0;t<this.x;t++)for(this.nodes[t]=new Array(this.y),r=0;r<this.y;r++){var e=new Array(this.numWeights);for(n=0;n<this.numWeights;n++)e[n]=this.randomizer();this.nodes[t][r]=new this.nodeType(t,r,e,this)}this.times.initNodes=Date.now()-o},SOM.prototype.setTraining=function(t){if(this.trainingSet)throw new Error("training set has already been set");var r,n=Date.now(),o=t,e=t.length;if(this.extractor)for(o=new Array(e),r=0;e>r;r++)o[r]=this.extractor(t[r]);this.numIterations=this.iterations*e,this.timeConstant="random"===this.algorithmMethod?this.numIterations/Math.log(this.mapRadius):e/Math.log(this.mapRadius),this.trainingSet=o,this.times.setTraining=Date.now()-n},SOM.prototype.trainOne=function(){if(this.done)return!1;if(this.numIterations-->0){var t,r,n;return"random"===this.algorithmMethod?(t=this.mapRadius*Math.exp(-this.iterationCount/this.timeConstant),r=getRandomValue(this.trainingSet,this.randomizer),this._adjust(r,t),this.learningRate=this.startLearningRate*Math.exp(-this.iterationCount/this.numIterations)):(n=-Math.floor(this.iterationCount/this.trainingSet.length),t=this.mapRadius*Math.exp(n/this.timeConstant),r=this.trainingSet[this.iterationCount%this.trainingSet.length],this._adjust(r,t),(this.iterationCount+1)%this.trainingSet.length===0&&(this.learningRate=this.startLearningRate*Math.exp(n/Math.floor(this.numIterations/this.trainingSet.length)))),this.iterationCount++,!0}return this.done=!0,!1},SOM.prototype._adjust=function(t,r){var n,o,e,i,s=Date.now(),a=this._findBestMatchingUnit(t),h=Date.now();this.times.findBMU+=h-s;var f=Math.floor(r),u=a.x-f,c=a.x+f,l=a.y-f,d=a.y+f;for(n=u;c>=n;n++){var p=n;for(0>n?p+=this.x:n>=this.x&&(p-=this.x),o=l;d>=o;o++){var v=o;0>o?v+=this.y:o>=this.y&&(v-=this.y),e=a[this.distanceMethod](this.nodes[p][v]),r>e&&(i=Math.exp(-e/(2*r)),this.nodes[p][v].adjustWeights(t,this.learningRate,i))}}this.times.adjust+=Date.now()-h},SOM.prototype.train=function(t){if(!this.done)for(this.setTraining(t);this.trainOne(););},SOM.prototype.getConvertedNodes=function(){for(var t=new Array(this.x),r=0;r<this.x;r++){t[r]=new Array(this.y);for(var n=0;n<this.y;n++){var o=this.nodes[r][n];t[r][n]=this.creator?this.creator(o.weights):o.weights}}return t},SOM.prototype._findBestMatchingUnit=function(t){for(var r,n,o=1/0,e=0;e<this.x;e++)for(var i=0;i<this.y;i++)n=this.distance(this.nodes[e][i].weights,t),o>n&&(o=n,r=this.nodes[e][i]);return r},SOM.prototype.predict=function(t,r){if("boolean"==typeof t&&(r=t,t=null),t||(t=this.trainingSet),Array.isArray(t)&&(Array.isArray(t[0])||"object"==typeof t[0])){var n=this;return t.map(function(t){return n._predict(t,r)})}return this._predict(t,r)},SOM.prototype._predict=function(t,r){Array.isArray(t)||(t=this.extractor(t));var n=this._findBestMatchingUnit(t),o=[n.x,n.y];return r&&(o[2]=n.getPosition(t)),o},SOM.prototype.getQuantizationError=function(){for(var t=this.getFit(),r=t.length,n=0,o=0;r>o;o++)n+=t[o];return n/r},SOM.prototype.getFit=function(t){t||(t=this.trainingSet);for(var r,n=t.length,o=new Array(n),e=0;n>e;e++)r=this._findBestMatchingUnit(t[e]),o[e]=Math.sqrt(this.distance(t[e],r.weights));return o},module.exports=SOM},{"./node-hexagonal":73,"./node-square":74}],73:[function(t,r){function n(t,r,n,e){o.call(this,t,r,n,e),this.hX=t-Math.floor(r/2),this.z=0-this.hX-r}var o=t("./node-square");n.prototype=new o,n.prototype.constructor=n,n.prototype.getDistance=function(t){return Math.max(Math.abs(this.hX-t.hX),Math.abs(this.y-t.y),Math.abs(this.z-t.z))},n.prototype.getDistanceTorus=function(t){var r=Math.abs(this.hX-t.hX),n=Math.abs(this.y-t.y),o=Math.abs(this.z-t.z);return Math.max(Math.min(r,this.som.gridDim.x-r),Math.min(n,this.som.gridDim.y-n),Math.min(o,this.som.gridDim.z-o))},n.prototype.getPosition=function(){throw new Error("Unimplemented : cannot get position of the points for hexagonal grid")},r.exports=n},{"./node-square":74}],74:[function(t,r){function n(t,r,n,o){this.x=t,this.y=r,this.weights=n,this.som=o,this.neighbors={}}n.prototype.adjustWeights=function(t,r,n){for(var o=0,e=this.weights.length;e>o;o++)this.weights[o]+=r*n*(t[o]-this.weights[o])},n.prototype.getDistance=function(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))},n.prototype.getDistanceTorus=function(t){var r=Math.abs(this.x-t.x),n=Math.abs(this.y-t.y);return Math.max(Math.min(r,this.som.gridDim.x-r),Math.min(n,this.som.gridDim.y-n))},n.prototype.getNeighbors=function(t){if(!this.neighbors[t]){this.neighbors[t]=new Array(2);var r;if(this[t]>0?r=this[t]-1:this.som.torus&&(r=this.som.gridDim[t]-1),"undefined"!=typeof r){var n,o;"x"===t?(n=r,o=this.y):(n=this.x,o=r),this.neighbors[t][0]=this.som.nodes[n][o]}var e;this[t]<this.som.gridDim[t]-1?e=this[t]+1:this.som.torus&&(e=0),"undefined"!=typeof e&&("x"===t?(n=e,o=this.y):(n=this.x,o=e),this.neighbors[t][1]=this.som.nodes[n][o])}return this.neighbors[t]},n.prototype.getPos=function(t,r){var n,o,e=this.getNeighbors(t),i=this.som.distance;if(e[0])if(e[1]){var s=i(r,e[0].weights),a=i(r,e[1].weights);a>s?(n=e[0],o=-1):(n=e[1],o=1)}else n=e[0],o=-1;else n=e[1],o=1;var h=1-i(r,this.weights),f=1-i(r,n.weights),u=(h-f)/(2-h-f);return.5+.5*u*o},n.prototype.getPosition=function(t){return[this.getPos("x",t),this.getPos("y",t)]},r.exports=n},{}],75:[function(t,r){"use strict";function n(t){for(var r=-1/0,n=t.length,o=0;n>o;o++)t[o]>r&&(r=t[o]);return r}function o(t){for(var r=1/0,n=t.length,o=0;n>o;o++)t[o]<r&&(r=t[o]);return r}function e(t){for(var r=1/0,n=-1/0,o=t.length,e=0;o>e;e++)t[e]<r&&(r=t[e]),t[e]>n&&(n=t[e]);return{min:r,max:n}}function i(t){for(var r=0,n=t.length,o=0;n>o;o++)r+=t[o];return r/n}function s(t){for(var r=0,n=t.length,o=0;n>o;o++)r*=t[o];return Math.pow(r,1/n)}function a(t){for(var r=0,n=t.length,o=0;n>o;o++)r+=Math.log(t[o]);return r/n}function h(t,r){for(var n=0,o=0,e=t.length,i=0;e>i;i++)n+=r[i]*t[i],o+=r[i];return n/o}function f(t,r,n){"undefined"==typeof n&&(n=!1),t=n?t:t.slice(),t.sort();for(var o=t.length,e=Math.floor(o*r),i=0,s=e;o-e>s;s++)i+=t[s];return i/(o-2*e)}function u(t,r){"undefined"==typeof r&&(r=1);for(var n=0,o=0,e=t.length,i=0;e>i;i++)n+=Math.pow(t[i],r+1),o+=Math.pow(t[i],r);return n/o}function c(t,r){return Math.sqrt(v(t,r))}function l(t){return c(t)/Math.sqrt(t.length)}function d(t,r){"undefined"==typeof r&&(r=!1),r||(t=t.slice(),t.sort());var n=t.length,o=Math.floor(n/2);return n%2===0?.5*(t[o-1]+t[o]):t[o]}function p(t,r){"undefined"==typeof r&&(r=!1),r||(t=t.slice(),t.sort());
var n=t.length/4,o=t[Math.ceil(n)-1],e=d(t,!0),i=t[Math.ceil(3*n)-1];return{q1:o,q2:e,q3:i}}function v(t,r){"undefined"==typeof r&&(r=!0);for(var n=i(t),o=0,e=t.length,s=0;e>s;s++){var a=t[s]-n;o+=a*a}return r?o/(e-1):o/e}function m(t,r){return Math.sqrt(g(t,r))}function g(t,r){"undefined"==typeof r&&(r=!0);for(var n=0,o=0,e=t.length,i=0;e>i;i++){var s=t[i],a=v(s);n+=(s.length-1)*a,o+=r?s.length-1:s.length}return n/o}function w(t){var r,n=t.length,o=new Array(n);for(r=0;n>r;r++)o[r]=0;var e=new Array(n),i=0;for(r=0;n>r;r++){var s=e.indexOf(t[r]);s>=0?o[s]++:(e[i]=t[r],o[i]=1,i++)}var a=0,h=0;for(r=0;i>r;r++)o[r]>a&&(a=o[r],h=r);return e[h]}function y(t,r,n){"undefined"==typeof n&&(n=!0);var o=i(t),e=i(r);if(t.length!==r.length)throw"Vectors do not have the same dimensions";for(var s=0,a=t.length,h=0;a>h;h++){var f=t[h]-o,u=r[h]-e;s+=f*u}return n?s/(a-1):s/a}function M(t,r){"undefined"==typeof r&&(r=!0);for(var n=i(t),o=0,e=0,s=t.length,a=0;s>a;a++){var h=t[a]-n;o+=h*h,e+=h*h*h}var f=o/s,u=e/s,c=u/Math.pow(f,1.5);if(r){var l=Math.sqrt(s*(s-1)),d=s-2;return l/d*c}return c}function x(t,r){"undefined"==typeof r&&(r=!0);for(var n=i(t),o=t.length,e=0,s=0,a=0;o>a;a++){var h=t[a]-n;e+=h*h,s+=h*h*h*h}var f=e/o,u=s/o;if(r){var c=e/(o-1),l=o*(o+1)/((o-1)*(o-2)*(o-3)),d=s/(c*c),p=(o-1)*(o-1)/((o-2)*(o-3));return l*d-3*p}return u/(f*f)-3}function b(t,r){"undefined"==typeof r&&(r=0);for(var n=0,o=t.length,e=0;o>e;e++)n+=t[e]*Math.log(t[e]+r);return-n}function k(t,r){for(var n=0,o=t.length,e=0;o>e;e++)n+=t[e]*r[e];return n}function A(t,r){return Math.sqrt(S(t,r))}function S(t,r){for(var n=k(t,r),o=0,e=t.length,i=0,s=0,a=0;e>a;a++){var h=t[a]-n,f=r[a];o+=f*h*h,s+=f,i+=f*f}return o*(s/(s*s-i))}function q(t,r){"undefined"==typeof r&&(r=!1);var n=t;r||(n=t.slice());for(var o=i(n),e=n.length,s=0;e>s;s++)n[s]-=o}function D(t,r,n){"undefined"==typeof r&&(r=c(t)),"undefined"==typeof n&&(n=!1);for(var o=t.length,e=n?t:new Array(o),i=0;o>i;i++)e[i]=t[i]/r;return e}function j(t){var r=t.length,n=new Array(r);n[0]=t[0];for(var o=1;r>o;o++)n[o]=n[o-1]+t[o];return n}r.exports={min:o,max:n,minMax:e,mean:i,geometricMean:s,logGeometricMean:a,grandMean:h,truncatedMean:f,contraHarmonicMean:u,standardDeviation:c,standardError:l,median:d,quartiles:p,variance:v,pooledStandardDeviation:m,pooledVariance:g,mode:w,covariance:y,skewness:M,kurtosis:x,entropy:b,weightedMean:k,weightedStandardDeviation:A,weightedVariance:S,center:q,standardize:D,cumulativeSum:j}},{}],76:[function(t,r){"use strict";function n(t,r){"undefined"==typeof r&&(r=0);for(var n=0,o=t.length,e=t[0].length,i=0;o>i;i++)for(var s=0;e>s;s++)n+=t[i][s]*Math.log(t[i][s]+r);return-n}function o(t,r){"undefined"==typeof r&&(r=0);var n,o,e,i,s=t.length,a=t[0].length;if(-1===r){for(n=[0],o=s*a,e=0;s>e;e++)for(i=0;a>i;i++)n[0]+=t[e][i];n[0]/=o}else if(0===r)for(n=new Array(a),o=s,i=0;a>i;i++){for(n[i]=0,e=0;s>e;e++)n[i]+=t[e][i];n[i]/=o}else{if(1!==r)throw new Error("Invalid dimension");for(n=new Array(s),o=a,i=0;s>i;i++){for(n[i]=0,e=0;a>e;e++)n[i]+=t[i][e];n[i]/=o}}return n}function e(t,r,n){for(var o=i(t,r,n),e=o.length,s=0;e>s;s++)o[s]=Math.sqrt(o[s]);return o}function i(t,r,n){"undefined"==typeof n&&(n=!0),r=r||o(t);var e=t.length;if(0===e)return[];for(var i=t[0].length,s=new Array(i),a=0;i>a;a++){for(var h=0,f=0,u=0,c=0;e>c;c++)u=t[c][a]-r[a],h+=u,f+=u*u;s[a]=n?(f-h*h/e)/(e-1):(f-h*h/e)/e}return s}function s(t){for(var r=t.length,n=t[0].length,o=new Array(n),e=0;n>e;e++){for(var i=new Array(r),s=0;r>s;s++)i[s]=t[s][e];i.sort();var a=i.length;o[e]=a%2===0?.5*(i[a/2]+i[a/2-1]):i[Math.floor(a/2)]}return o}function a(t){var r,n,o=t.length,e=t[0].length,i=new Array(e);for(r=0;e>r;r++){for(var s=new Array(o),a=0;o>a;a++)s[a]=0;var h=new Array(o),f=0;for(n=0;o>n;n++){var u=h.indexOf(t[n][r]);u>=0?s[u]++:(h[f]=t[n][r],s[f]=1,f++)}var c=0,l=0;for(n=0;f>n;n++)s[n]>c&&(c=s[n],l=n);i[r]=h[l]}return i}function h(t,r){"undefined"==typeof r&&(r=!0);for(var n=o(t),e=t.length,i=n.length,s=new Array(i),a=0;i>a;a++){for(var h=0,f=0,u=0;e>u;u++){var c=t[u][a]-n[a];h+=c*c,f+=c*c*c}var l=h/e,d=f/e,p=d/Math.pow(l,1.5);if(r){var v=Math.sqrt(e*(e-1)),m=e-2;s[a]=v/m*p}else s[a]=p}return s}function f(t,r){"undefined"==typeof r&&(r=!0);for(var n=o(t),e=t.length,i=t[0].length,s=new Array(i),a=0;i>a;a++){for(var h=0,f=0,u=0;e>u;u++){var c=t[u][a]-n[a];h+=c*c,f+=c*c*c*c}var l=h/e,d=f/e;if(r){var p=h/(e-1),v=e*(e+1)/((e-1)*(e-2)*(e-3)),m=f/(p*p),g=(e-1)*(e-1)/((e-2)*(e-3));s[a]=v*m-3*g}else s[a]=d/(l*l)-3}return s}function u(t){for(var r=t.length,n=e(t),o=n.length,i=new Array(o),s=Math.sqrt(r),a=0;o>a;a++)i[a]=n[a]/s;return i}function c(t,r){return l(t,void 0,r)}function l(t,r,n){"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(0===n?r=t.length-1:1===n&&(r=t[0].length-1));var e=o(t,n),i=t.length;if(0===i)return[[]];var s,a,h,f,u,c=t[0].length;if(0===n){for(s=new Array(c),a=0;c>a;a++)s[a]=new Array(c);for(a=0;c>a;a++)for(h=a;c>h;h++){for(f=0,u=0;i>u;u++)f+=(t[u][h]-e[h])*(t[u][a]-e[a]);f/=r,s[a][h]=f,s[h][a]=f}}else{if(1!==n)throw new Error("Invalid dimension");for(s=new Array(i),a=0;i>a;a++)s[a]=new Array(i);for(a=0;i>a;a++)for(h=a;i>h;h++){for(f=0,u=0;c>u;u++)f+=(t[h][u]-e[h])*(t[a][u]-e[a]);f/=r,s[a][h]=f,s[h][a]=f}}return s}function d(t){var r,n,i=o(t),s=e(t,!0,i),a=p(t,i,s),h=t.length,f=t[0].length,u=new Array(f);for(r=0;f>r;r++)u[r]=new Array(f);for(r=0;f>r;r++)for(n=r;f>n;n++){for(var c=0,l=0,d=a.length;d>l;l++)c+=a[l][n]*a[l][r];c/=h-1,u[r][n]=c,u[n][r]=c}return u}function p(t,r,n){return r=r||o(t),"undefined"==typeof n&&(n=e(t,!0,r)),m(v(t,r,!1),n,!0)}function v(t,r,n){r=r||o(t);var e,i,s,a=t,h=t.length;if(!n)for(a=new Array(h),e=0;h>e;e++)a[e]=new Array(t[e].length);for(e=0;h>e;e++){var f=a[e];for(i=0,s=f.length;s>i;i++)f[i]=t[e][i]-r[i]}return a}function m(t,r,n){"undefined"==typeof r&&(r=e(t));var o,i,s,a=t,h=t.length;if(!n)for(a=new Array(h),o=0;h>o;o++)a[o]=new Array(t[o].length);for(o=0;h>o;o++){var f=a[o],u=t[o];for(i=0,s=f.length;s>i;i++)0===r[i]||isNaN(r[i])||(f[i]=u[i]/r[i])}return a}function g(t,r){var n=o(t),e=t.length;if(0===e)return[];for(var i=t[0].length,s=new Array(i),a=0;i>a;a++){for(var h=0,f=0,u=0,c=0;e>c;c++){var l=t[c][a]-n[a],d=r[c];h+=d*l*l,u+=d,f+=d*d}s[a]=h*(u/(u*u-f))}return s}function w(t,r,n){"undefined"==typeof n&&(n=0);var o=t.length;if(0===o)return[];var e,i,s,a,h,f,u=t[0].length;if(0===n){for(e=new Array(u),i=0;u>i;i++)e[i]=0;for(i=0;o>i;i++)for(f=t[i],h=r[i],a=0;u>a;a++)e[a]+=f[a]*h}else{if(1!==n)throw new Error("Invalid dimension");for(e=new Array(o),i=0;o>i;i++)e[i]=0;for(a=0;o>a;a++)for(f=t[a],h=r[a],i=0;u>i;i++)e[a]+=f[i]*h}var c=x(r);if(0!==c)for(i=0,s=e.length;s>i;i++)e[i]/=c;return e}function y(t,r,n,o){o=o||0,n=n||w(t,r,o);for(var e=0,i=0,s=0,a=r.length;a>s;s++)e+=r[s],i+=r[s]*r[s];var h=e/(e*e-i);return M(t,r,n,h,o)}function M(t,r,n,o,e){e=e||0,n=n||w(t,r,e),"undefined"==typeof o&&(o=1);var i=t.length;if(0===i)return[[]];var s,a,h,f,u,c=t[0].length;if(0===e){for(s=new Array(c),a=0;c>a;a++)s[a]=new Array(c);for(a=0;c>a;a++)for(h=a;c>h;h++){for(u=0,f=0;i>f;f++)u+=r[f]*(t[f][h]-n[h])*(t[f][a]-n[a]);s[a][h]=u*o,s[h][a]=u*o}}else{if(1!==e)throw new Error("Invalid dimension");for(s=new Array(i),a=0;i>a;a++)s[a]=new Array(i);for(a=0;i>a;a++)for(h=a;i>h;h++){for(u=0,f=0;c>f;f++)u+=r[f]*(t[h][f]-n[h])*(t[a][f]-n[a]);s[a][h]=u*o,s[h][a]=u*o}}return s}function x(t){for(var r=0,n=t.length,o=0;n>o;o++)r+=t[o];return r}r.exports={entropy:n,mean:o,standardDeviation:e,variance:i,median:s,mode:a,skewness:h,kurtosis:f,standardError:u,covariance:c,scatter:l,correlation:d,zScores:p,center:v,standardize:m,weightedVariance:g,weightedMean:w,weightedCovariance:y,weightedScatter:M}},{}],77:[function(t,r,n){n.svm=t("./svm"),n.kernel=t("./kernel")},{"./kernel":78,"./svm":79}],78:[function(t,r){"use strict";function n(t,r,n,e){n="undefined"==typeof n?"lineal":n,e="undefined"==typeof e?2:e;var i=o(t,r);if("lineal"===n)return i;if("polynomial"===n)return Math.pow(i+1,e);if("radial"===n){for(var s=t.length,a=new Array(s),h=0;s>h;h++)a[h]=t[h]-r[h];var f=o(a,a);return Math.exp(f/(-2*e*e))}throw new TypeError("Function kernel undefined")}function o(t,r){if(t.length!==r.length)throw new TypeError("Arrays should have the same length");for(var n=t.length,o=0,e=0;n>e;e++)o+=t[e]*r[e];return o}r.exports=n},{}],79:[function(t,r){"use strict";function n(t,r,n,o,i,s,a){for(var h=r.length,f=i,u=0;h>u;u++)i+=o[u]*n[u]*e(r[u],t,s,a);return f}function o(t){t=t||{},this.options={};for(var r in i)this.options[r]=t.hasOwnProperty(r)?t[r]:i[r];this.b=0}var e=t("./kernel"),i={C:10,tol:.1,max_passes:100,par:2,k:"lineal"};o.prototype.train=function(t,r){for(var o=r.length,i=new Array(o),s=0;o>s;s++)i[s]=0;if(t.length!==o)throw new TypeError("Arrays should have the same length");for(var a=0,h=0,f=0,u=0,c=0,l=0,d=0,p=0,v=0,m=0,g=0;u<this.options.max_passes;){for(var w=0,y=0;o>y;y++)if(c=n(t[y],t,r,i,a,this.options.k,this.options.par)-r[y],r[y]*c<-this.options.tol&&i[y]<this.options.C||r[y]*c>this.options.tol&&i[y]>0){var M=0;do M=Math.ceil(Math.random()*(o-1));while(M===y);l=n(t[M],t,r,i,a,this.options.k,this.options.par)-r[M],d=i[y],p=i[M],r[y]===r[M]?(v=Math.max(0,d+p-this.options.C),m=Math.min(this.options.C,d+p)):(v=Math.max(0,d-p),m=Math.min(this.options.C,this.options.C-d+p)),v!==m&&(g=2*e(t[y],t[M],this.options.k,this.options.par)-e(t[y],t[y],this.options.k,this.options.par)-e(t[M],t[M],this.options.k,this.options.par),0>g&&(i[M]=i[M]-r[M]*(c-l)/g,i[M]>m?i[M]=m:i[M]<v&&(i[M]=v),Math.abs(p-i[M])>=1e-4&&(i[y]=i[y]+r[y]*r[M]*(p-i[M]),h=a-c-r[y]*(i[y]-d)*e(t[y],t[y],this.options.k,this.options.par)-r[M]*(i[M]-p)*e(t[y],t[M],this.options.k,this.options.par),f=a-l-r[y]*(i[y]-d)*e(t[y],t[M],this.options.k,this.options.par)-r[M]*(i[M]-p)*e(t[M],t[M],this.options.k,this.options.par),a=i[y]<this.options.C&&i[y]>0?h:i[M]<this.options.C&&i[M]>0?f:(h+f)/2,w+=1)))}0==w?u+=1:u=0}this.b=a;var x=t[0].length;this.W=new Array(x);for(var b=0;x>b;b++){this.W[b]=0;for(var k=0;o>k;k++)this.W[b]+=r[k]*i[k]*t[k][b]}this.alphas=i.splice()},o.load=function(t){if("SVM"===t.name){var r=new o(t.options);return r.W=t.W.slice(),r.b=t.b,r}throw new TypeError("expecting a SVM model")},o.prototype["export"]=function(){var t={name:"SVM"};return t.options=this.options,t.W=this.W,t.b=this.b,t},o.prototype.getAlphas=function(){return this.alphas.slice()},o.prototype.getThreshold=function(){return this.b},o.prototype.predict=function(t){var r;if(Array.isArray(t)&&(Array.isArray(t[0])||"object"==typeof t[0])){for(var n=new Array(t.length),o=0;o<n.length;o++){r=this.b;for(var e=0;e<this.W.length;e++)r+=this.W[e]*t[e];n[o]=0>r?-1:1}return n}r=this.b;for(var i=0;i<this.W.length;i++)r+=this.W[i]*t[i];return 0>r?-1:1},r.exports=o},{"./kernel":78}]},{},[1])(1)});
//# sourceMappingURL=ml.min.js.map